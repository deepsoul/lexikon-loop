<template>
  <div>
    <div>
      <div class="page-bg">
        <div class="main-card">
          <!-- Header mit Icons-Link -->
          <header class="header-section">
            <!-- <router-link to="/" class="logo-link"></router-link> -->
            <div class="header-content">
              <h1 class="game-title-animated">Lexikon-Loop</h1>
              <div class="subtitle-animated">Das digitale Wortketten-Spiel</div>
            </div>
          </header>

          <!-- Timer-Einstellung (kompakter) -->
          <div class="timer-settings-section">
            <div class="timer-settings">
              <span class="timer-settings-label">Rundenzeit:</span>
              <div class="timer-buttons">
                <button
                  v-for="opt in timerOptions"
                  :key="opt"
                  class="timer-settings-btn"
                  :class="{active: timerDuration === opt}"
                  @click="setTimerDuration(opt)"
                >
                  {{ opt }}s
                </button>
              </div>
            </div>
            <div v-if="isSpeedRound" class="speed-round-badge">
              ‚ö° Speed-Runde! Korrekte Antwort = 2 Punkte
            </div>
          </div>

          <!-- Multiplayer Section -->
          <div class="multiplayer-section">
            <div class="multiplayer-header">
              <h3 class="section-title">üì± Multiplayer (iOS & Android)</h3>
              <div class="multiplayer-status" :class="multiplayerStatusClass">
                {{ multiplayerStatusText }}
              </div>
            </div>

            <div class="multiplayer-controls">
              <button
                v-if="!isMultiplayerHost && !isMultiplayerConnected"
                class="multiplayer-btn host"
                @click="startMultiplayerHost"
              >
                üè† Als Host starten
              </button>

              <button
                v-if="!isMultiplayerHost && !isMultiplayerConnected"
                class="multiplayer-btn join"
                @click="showJoinModal = true"
              >
                üîó Spiel beitreten
              </button>

              <button
                v-if="isMultiplayerHost || isMultiplayerConnected"
                class="multiplayer-btn disconnect"
                @click="disconnectMultiplayer"
              >
                üîå Verbindung trennen
              </button>
            </div>

            <!-- Multiplayer Toggle Button -->
            <div
              class="multiplayer-toggle"
              v-if="isMultiplayerHost || isMultiplayerConnected"
            >
              <button
                class="toggle-btn"
                @click="toggleMultiplayerPanel"
                :class="{expanded: showMultiplayerPanel}"
              >
                <span v-if="isMultiplayerHost">üè† Host-Panel</span>
                <span v-else>üì± Client-Panel</span>
                <span class="toggle-icon">{{
                  showMultiplayerPanel ? '‚ñº' : '‚ñ∂'
                }}</span>
              </button>
            </div>

            <!-- Ausklappbares Multiplayer Panel -->
            <div
              v-if="
                showMultiplayerPanel &&
                (isMultiplayerHost || isMultiplayerConnected)
              "
              class="multiplayer-panel"
              :class="{expanded: showMultiplayerPanel}"
            >
              <div v-if="isMultiplayerHost" class="multiplayer-host-info">
                <div class="host-info">
                  <strong>üè† Du bist der Host</strong>
                  <p>Andere Spieler k√∂nnen sich √ºber QR-Code verbinden</p>

                  <!-- Share Game Section -->
                  <div class="share-game-section">
                    <h4>Spiel einladen:</h4>
                    <div class="share-buttons">
                      <button
                        class="share-btn whatsapp"
                        @click="shareViaWhatsApp"
                      >
                        üì± WhatsApp
                      </button>
                      <button class="share-btn email" @click="shareViaEmail">
                        üìß Email
                      </button>
                      <button class="share-btn copy" @click="copyJoinLink">
                        üìã Link kopieren
                      </button>
                    </div>
                    <div class="join-link-info">
                      <p>
                        <strong>Join-ID:</strong> <code>{{ roomId }}</code>
                      </p>
                      <p>
                        <strong>Link:</strong> <code>{{ joinLink }}</code>
                      </p>
                    </div>
                  </div>

                  <div class="connected-players">
                    <h4>Verbundene Spieler:</h4>
                    <div
                      v-for="player in multiplayerPlayers"
                      :key="player.id"
                      class="multiplayer-player"
                    >
                      <span class="player-avatar">{{
                        player.name.charAt(0).toUpperCase()
                      }}</span>
                      <span class="player-name">{{ player.name }}</span>
                      <span class="player-score">{{ player.score }}</span>
                    </div>
                  </div>
                </div>
              </div>

              <div
                v-if="isMultiplayerConnected && !isMultiplayerHost"
                class="multiplayer-client-info"
              >
                <div class="client-info">
                  <strong>üì± Verbunden mit Host</strong>
                  <p>Du spielst als: {{ multiplayerPlayerName }}</p>
                  <div class="game-status">
                    <p v-if="resultText">
                      Aktuelle Kategorie: {{ resultText }}
                    </p>
                    <p v-if="currentLetter">
                      Aktueller Buchstabe:
                      {{ currentLetter }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- QR-Code immer sichtbar f√ºr Host -->
          <div v-if="isMultiplayerHost" class="always-visible-qr">
            <div class="qr-code-container">
              <h4>QR-Code f√ºr Spieler:</h4>
              <div class="qr-code" ref="qrCodeRef">
                <div
                  v-if="!hostQRCode"
                  style="padding: 20px; text-align: center; color: #64748b"
                >
                  QR-Code wird generiert...
                </div>
              </div>
              <p class="qr-instruction">
                Spieler scannen diesen QR-Code mit ihrem Handy
              </p>
            </div>
          </div>

          <!-- Multiplayer Game Status -->
          <div v-if="isMultiplayerConnected" class="multiplayer-game-status">
            <div class="status-card">
              <h4>üéØ Aktueller Spielstand</h4>
              <div class="status-content">
                <div
                  v-if="resultText && resultText !== 'Bereit zum W√ºrfeln!'"
                  class="status-item"
                >
                  <strong>Kategorie:</strong> {{ resultText }}
                </div>
                <div
                  v-if="currentLetter && currentLetter !== '-'"
                  class="status-item"
                >
                  <strong>Buchstabe:</strong> {{ currentLetter }}
                </div>
                <div
                  v-if="!resultText || resultText === 'Bereit zum W√ºrfeln!'"
                  class="status-item"
                >
                  <em>W√ºrfle um zu beginnen!</em>
                </div>
              </div>
            </div>
          </div>

          <!-- Spieler-Management -->
          <div class="players-section">
            <div class="players-header">
              <h3 class="section-title">
                {{ isMultiplayerConnected ? 'Multiplayer Spieler' : 'Spieler' }}
              </h3>
              <button
                class="add-player-btn"
                @click="addPlayer"
                title="Spieler hinzuf√ºgen"
                v-if="!isMultiplayerConnected"
              >
                <span>Ôºã</span>
              </button>
            </div>

            <!-- Spieler-Liste -->
            <div class="players-list">
              <!-- Debug Info -->
              <div
                v-if="isMultiplayerConnected"
                style="
                  background: #f0f0f0;
                  padding: 0.5rem;
                  margin-bottom: 0.5rem;
                  font-size: 0.8rem;
                "
              >
                Debug: isMultiplayerConnected={{ isMultiplayerConnected }},
                multiplayerPlayers={{ multiplayerPlayers.length }},
                localPlayers={{ players.length }}
              </div>

              <!-- Multiplayer-Spieler -->
              <div
                v-if="isMultiplayerConnected"
                v-for="(p, i) in multiplayerPlayers"
                :key="p.id"
                class="player-item"
                :class="{'player-active': i === currentPlayer}"
              >
                <div class="player-info">
                  <span class="player-avatar">{{
                    p.name.charAt(0).toUpperCase()
                  }}</span>
                  <span class="player-name">{{ p.name }}</span>
                  <span class="player-score">{{ p.score }}</span>
                </div>
              </div>

              <!-- Lokale Spieler (nur im Singleplayer) -->
              <div
                v-if="!isMultiplayerConnected"
                v-for="(p, i) in players"
                :key="i"
                class="player-item"
                :class="{'player-active': i === currentPlayer}"
              >
                <div class="player-info">
                  <span class="player-avatar">{{
                    p.name.charAt(0).toUpperCase()
                  }}</span>
                  <span class="player-name">{{ p.name }}</span>
                  <span class="player-score">{{ p.score }}</span>
                </div>

                <!-- Nur im Singleplayer: Spieler-Aktionen -->
                <div class="player-actions">
                  <button
                    class="action-btn"
                    @click="deletePlayer(i)"
                    title="L√∂schen"
                  >
                    üóëÔ∏è
                  </button>
                  <button
                    v-if="i > 0"
                    class="action-btn"
                    @click="movePlayer(i, 'up')"
                    title="Nach oben"
                  >
                    ‚ñ≤
                  </button>
                  <button
                    v-if="i < players.length - 1"
                    class="action-btn"
                    @click="movePlayer(i, 'down')"
                    title="Nach unten"
                  >
                    ‚ñº
                  </button>
                </div>
              </div>
            </div>

            <!-- Nur im Singleplayer: Reset-Button -->
            <button
              class="reset-all-btn"
              @click="resetAllPlayers"
              v-if="!isMultiplayerConnected"
            >
              <svg
                class="reset-icon"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M10 3a7 7 0 0 0-7 7h-3l4 4 4-4H7a3 3 0 1 1 3 3v2a5 5 0 1 0-5-5H3a7 7 0 1 1 7 7v-2z"
                  fill="currentColor"
                />
              </svg>
              Alle zur√ºcksetzen
            </button>
          </div>

          <!-- Hauptspielbereich -->
          <div class="game-section">
            <!-- W√ºrfel-Bereich -->
            <div class="dice-section">
              <div class="dice-container">
                <div
                  class="dice"
                  :style="{
                    transform: `rotateX(${diceRotation?.x || 0}deg) rotateY(${
                      diceRotation?.y || 0
                    }deg) rotateZ(${diceRotation?.z || 0}deg)`,
                  }"
                >
                  <div class="dice-face">
                    <!-- Stadt-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="white"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <path
                        d="M186.094 193.527V198.707H170.098V193.527H186.094ZM174.059 186.748H181.371V212.723C181.371 213.518 181.473 214.128 181.676 214.551C181.896 214.974 182.217 215.27 182.641 215.439C183.064 215.592 183.597 215.668 184.24 215.668C184.697 215.668 185.104 215.651 185.459 215.617C185.831 215.566 186.145 215.516 186.398 215.465L186.424 220.848C185.798 221.051 185.12 221.212 184.393 221.33C183.665 221.449 182.861 221.508 181.98 221.508C180.372 221.508 178.967 221.245 177.766 220.721C176.581 220.179 175.667 219.316 175.023 218.131C174.38 216.946 174.059 215.389 174.059 213.459V186.748Z"
                        fill="black"
                      />
                      <path
                        d="M159.561 215.008V182H166.924V221H160.297L159.561 215.008ZM142.193 207.594V207.061C142.193 204.962 142.43 203.057 142.904 201.348C143.378 199.621 144.072 198.14 144.986 196.904C145.9 195.669 147.026 194.712 148.363 194.035C149.701 193.358 151.224 193.02 152.934 193.02C154.542 193.02 155.947 193.358 157.148 194.035C158.367 194.712 159.4 195.677 160.246 196.93C161.109 198.165 161.803 199.63 162.328 201.322C162.853 202.998 163.234 204.835 163.471 206.832V208C163.234 209.913 162.853 211.69 162.328 213.332C161.803 214.974 161.109 216.413 160.246 217.648C159.4 218.867 158.367 219.815 157.148 220.492C155.93 221.169 154.508 221.508 152.883 221.508C151.173 221.508 149.65 221.161 148.312 220.467C146.992 219.773 145.875 218.799 144.961 217.547C144.064 216.294 143.378 214.822 142.904 213.129C142.43 211.436 142.193 209.591 142.193 207.594ZM149.506 207.061V207.594C149.506 208.728 149.59 209.786 149.76 210.768C149.946 211.749 150.242 212.621 150.648 213.383C151.072 214.128 151.613 214.712 152.273 215.135C152.951 215.541 153.771 215.744 154.736 215.744C155.989 215.744 157.021 215.465 157.834 214.906C158.646 214.331 159.264 213.544 159.688 212.545C160.128 211.546 160.382 210.395 160.449 209.092V205.766C160.398 204.699 160.246 203.743 159.992 202.896C159.755 202.033 159.4 201.297 158.926 200.688C158.469 200.078 157.893 199.604 157.199 199.266C156.522 198.927 155.718 198.758 154.787 198.758C153.839 198.758 153.027 198.978 152.35 199.418C151.673 199.841 151.122 200.425 150.699 201.17C150.293 201.915 149.988 202.795 149.785 203.811C149.599 204.809 149.506 205.893 149.506 207.061Z"
                        fill="black"
                      />
                      <path
                        d="M130.336 214.805V202.566C130.336 201.686 130.192 200.933 129.904 200.307C129.617 199.663 129.168 199.164 128.559 198.809C127.966 198.453 127.196 198.275 126.248 198.275C125.436 198.275 124.733 198.419 124.141 198.707C123.548 198.978 123.091 199.376 122.77 199.9C122.448 200.408 122.287 201.009 122.287 201.703H114.975C114.975 200.535 115.245 199.426 115.787 198.377C116.329 197.327 117.116 196.405 118.148 195.609C119.181 194.797 120.408 194.162 121.83 193.705C123.269 193.248 124.877 193.02 126.654 193.02C128.787 193.02 130.683 193.375 132.342 194.086C134.001 194.797 135.304 195.863 136.252 197.285C137.217 198.707 137.699 200.484 137.699 202.617V214.373C137.699 215.88 137.792 217.115 137.979 218.08C138.165 219.028 138.436 219.857 138.791 220.568V221H131.402C131.047 220.255 130.776 219.324 130.59 218.207C130.421 217.073 130.336 215.939 130.336 214.805ZM131.301 204.268L131.352 208.406H127.264C126.299 208.406 125.461 208.516 124.75 208.736C124.039 208.956 123.455 209.27 122.998 209.676C122.541 210.065 122.202 210.522 121.982 211.047C121.779 211.572 121.678 212.147 121.678 212.773C121.678 213.4 121.822 213.967 122.109 214.475C122.397 214.965 122.812 215.355 123.354 215.643C123.895 215.913 124.53 216.049 125.258 216.049C126.358 216.049 127.314 215.829 128.127 215.389C128.939 214.949 129.566 214.407 130.006 213.764C130.463 213.12 130.7 212.511 130.717 211.936L132.646 215.033C132.376 215.727 132.003 216.447 131.529 217.191C131.072 217.936 130.488 218.639 129.777 219.299C129.066 219.942 128.212 220.475 127.213 220.898C126.214 221.305 125.029 221.508 123.658 221.508C121.915 221.508 120.332 221.161 118.91 220.467C117.505 219.756 116.388 218.783 115.559 217.547C114.746 216.294 114.34 214.872 114.34 213.281C114.34 211.842 114.611 210.564 115.152 209.447C115.694 208.33 116.49 207.391 117.539 206.629C118.605 205.85 119.934 205.266 121.525 204.877C123.117 204.471 124.962 204.268 127.061 204.268H131.301Z"
                        fill="black"
                      />
                      <path
                        d="M111.344 193.527V198.707H95.3477V193.527H111.344ZM99.3086 186.748H106.621V212.723C106.621 213.518 106.723 214.128 106.926 214.551C107.146 214.974 107.467 215.27 107.891 215.439C108.314 215.592 108.847 215.668 109.49 215.668C109.947 215.668 110.354 215.651 110.709 215.617C111.081 215.566 111.395 215.516 111.648 215.465L111.674 220.848C111.048 221.051 110.37 221.212 109.643 221.33C108.915 221.449 108.111 221.508 107.23 221.508C105.622 221.508 104.217 221.245 103.016 220.721C101.831 220.179 100.917 219.316 100.273 218.131C99.6302 216.946 99.3086 215.389 99.3086 213.459V186.748Z"
                        fill="black"
                      />
                      <path
                        d="M85.5469 211.326C85.5469 210.666 85.4453 210.074 85.2422 209.549C85.056 209.007 84.7005 208.516 84.1758 208.076C83.651 207.619 82.9147 207.171 81.9668 206.73C81.0189 206.29 79.7917 205.833 78.2852 205.359C76.6094 204.818 75.0182 204.208 73.5117 203.531C72.0221 202.854 70.7018 202.067 69.5508 201.17C68.4167 200.256 67.5195 199.198 66.8594 197.996C66.2161 196.794 65.8945 195.398 65.8945 193.807C65.8945 192.266 66.2331 190.87 66.9102 189.617C67.5872 188.348 68.5352 187.264 69.7539 186.367C70.9727 185.453 72.4115 184.751 74.0703 184.26C75.7461 183.769 77.5827 183.523 79.5801 183.523C82.3053 183.523 84.6836 184.014 86.7148 184.996C88.7461 185.978 90.3203 187.324 91.4375 189.033C92.5716 190.743 93.1387 192.698 93.1387 194.898H85.5723C85.5723 193.815 85.3438 192.867 84.8867 192.055C84.4466 191.225 83.7695 190.574 82.8555 190.1C81.9583 189.626 80.8242 189.389 79.4531 189.389C78.1328 189.389 77.0326 189.592 76.1523 189.998C75.2721 190.387 74.612 190.921 74.1719 191.598C73.7318 192.258 73.5117 193.003 73.5117 193.832C73.5117 194.458 73.6641 195.025 73.9688 195.533C74.2904 196.041 74.7643 196.515 75.3906 196.955C76.0169 197.395 76.7871 197.81 77.7012 198.199C78.6152 198.589 79.6732 198.969 80.875 199.342C82.8893 199.951 84.6582 200.637 86.1816 201.398C87.722 202.16 89.0085 203.015 90.041 203.963C91.0736 204.911 91.8522 205.986 92.377 207.188C92.9017 208.389 93.1641 209.752 93.1641 211.275C93.1641 212.883 92.8509 214.322 92.2246 215.592C91.5983 216.861 90.6927 217.936 89.5078 218.816C88.3229 219.697 86.9095 220.365 85.2676 220.822C83.6257 221.279 81.7891 221.508 79.7578 221.508C77.9297 221.508 76.127 221.271 74.3496 220.797C72.5723 220.306 70.9557 219.57 69.5 218.588C68.0612 217.606 66.9102 216.354 66.0469 214.83C65.1836 213.307 64.752 211.504 64.752 209.422H72.3945C72.3945 210.573 72.5723 211.546 72.9277 212.342C73.2832 213.137 73.7826 213.781 74.4258 214.271C75.0859 214.762 75.8646 215.118 76.7617 215.338C77.6758 215.558 78.6745 215.668 79.7578 215.668C81.0781 215.668 82.1615 215.482 83.0078 215.109C83.8711 214.737 84.5059 214.221 84.9121 213.561C85.3353 212.9 85.5469 212.156 85.5469 211.326Z"
                        fill="black"
                      />
                      <path
                        d="M197.487 156.625C200.532 156.625 203 159.093 203 162.138C203 165.182 200.532 167.65 197.487 167.65H61.5127C58.4682 167.65 56 165.182 56 162.138C56.0001 159.093 58.4683 156.625 61.5127 156.625H66.1064V84.5312C66.1067 81.2177 68.7929 78.5312 72.1064 78.5312H92.75V34C92.7502 30.6865 95.4365 28.0001 98.75 28H160.25C163.563 28.0001 166.25 30.6865 166.25 34V100.581H185.976C189.289 100.581 191.975 103.268 191.976 106.581V156.625H197.487ZM82.8066 125.388C81.7023 125.388 80.807 126.283 80.8066 127.388V138.087C80.8066 139.191 81.7021 140.087 82.8066 140.087H93.5068C94.6111 140.087 95.5068 139.191 95.5068 138.087V127.388C95.5065 126.284 94.6109 125.388 93.5068 125.388H82.8066ZM109.45 125.388C108.346 125.388 107.451 126.283 107.45 127.388V138.087C107.45 139.191 108.346 140.087 109.45 140.087H120.15C121.255 140.087 122.15 139.191 122.15 138.087V127.388C122.15 126.284 121.255 125.388 120.15 125.388H109.45ZM137.932 125.388C136.827 125.388 135.932 126.283 135.932 127.388V138.087C135.932 139.191 136.827 140.087 137.932 140.087H148.632C149.736 140.087 150.632 139.191 150.632 138.087V127.388C150.632 126.284 149.736 125.388 148.632 125.388H137.932ZM164.575 125.388C163.471 125.388 162.576 126.283 162.575 127.388V138.087C162.575 139.191 163.471 140.087 164.575 140.087H175.275C176.38 140.087 177.275 139.191 177.275 138.087V127.388C177.275 126.284 176.38 125.388 175.275 125.388H164.575ZM82.8066 98.7432C81.7024 98.7432 80.8072 99.639 80.8066 100.743V111.443C80.8066 112.548 81.7021 113.443 82.8066 113.443H93.5068C94.6111 113.443 95.5068 112.548 95.5068 111.443V100.743C95.5063 99.6392 94.6108 98.7435 93.5068 98.7432H82.8066ZM109.45 98.7432C108.346 98.7433 107.451 99.6391 107.45 100.743V111.443C107.45 112.548 108.346 113.443 109.45 113.443H120.15C121.255 113.443 122.15 112.548 122.15 111.443V100.743C122.15 99.6392 121.254 98.7434 120.15 98.7432H109.45ZM137.932 98.7432C136.827 98.7432 135.932 99.639 135.932 100.743V111.443C135.932 112.548 136.827 113.443 137.932 113.443H148.632C149.736 113.443 150.632 112.548 150.632 111.443V100.743C150.631 99.6392 149.736 98.7435 148.632 98.7432H137.932ZM109.45 72.0996C108.346 72.0997 107.451 72.9955 107.45 74.0996V84.7998C107.45 85.9043 108.346 86.7997 109.45 86.7998H120.15C121.255 86.7996 122.15 85.9042 122.15 84.7998V74.0996C122.15 72.9955 121.255 72.0998 120.15 72.0996H109.45ZM137.932 72.0996C136.827 72.0996 135.932 72.9954 135.932 74.0996V84.7998C135.932 85.9044 136.827 86.7998 137.932 86.7998H148.632C149.736 86.7995 150.632 85.9042 150.632 84.7998V74.0996C150.631 72.9956 149.736 72.0999 148.632 72.0996H137.932ZM109.45 45.4561C108.346 45.4562 107.451 46.3518 107.45 47.4561V58.1562C107.45 59.2607 108.346 60.1561 109.45 60.1562H120.15C121.255 60.156 122.15 59.2606 122.15 58.1562V47.4561C122.15 46.3519 121.255 45.4563 120.15 45.4561H109.45ZM137.932 45.4561C136.827 45.4561 135.932 46.3518 135.932 47.4561V58.1562C135.932 59.2607 136.827 60.1562 137.932 60.1562H148.632C149.736 60.1559 150.632 59.2605 150.632 58.1562V47.4561C150.632 46.352 149.736 45.4564 148.632 45.4561H137.932Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                  <div class="dice-face">
                    <!-- Land-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="#D4EEC9"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <g clip-path="url(#clip0_1_699)">
                        <path
                          d="M60 101C60 82.4348 67.375 64.6301 80.5025 51.5025C93.6301 38.375 111.435 31 130 31C148.565 31 166.37 38.375 179.497 51.5025C192.625 64.6301 200 82.4348 200 101C200 119.565 192.625 137.37 179.497 150.497C166.37 163.625 148.565 171 130 171C111.435 171 93.6301 163.625 80.5025 150.497C67.375 137.37 60 119.565 60 101ZM125.625 40.4237C119.762 42.2087 113.944 47.5987 109.114 56.655C107.86 59.0058 106.708 61.5492 105.658 64.285C111.826 65.6587 118.537 66.5337 125.625 66.7962V40.4237ZM97.1787 61.9662C98.4271 58.6004 99.83 55.4563 101.388 52.5338C102.91 49.6788 104.657 46.949 106.611 44.37C99.161 47.455 92.3932 51.9807 86.6963 57.6875C89.8696 59.3033 93.3637 60.7237 97.1787 61.9662ZM90.7038 96.625C91.0188 87.2625 92.3487 78.3638 94.5187 70.305C89.7801 68.7963 85.1951 66.8422 80.825 64.4688C73.8543 73.8246 69.7177 84.986 68.9075 96.625H90.7038ZM102.954 72.6412C100.888 80.4785 99.7136 88.5241 99.4537 96.625H125.625V75.5462C117.662 75.2837 110.024 74.2775 102.954 72.6412ZM134.375 75.5375V96.625H160.537C160.28 88.5245 159.109 80.4789 157.046 72.6412C149.976 74.2775 142.338 75.2663 134.375 75.5375ZM99.4625 105.375C99.7688 114.011 101.003 122.122 102.954 129.359C110.4 127.668 117.992 126.698 125.625 126.463V105.375H99.4625ZM134.375 105.375V126.454C142.338 126.716 149.976 127.722 157.046 129.359C158.997 122.122 160.231 114.011 160.546 105.375H134.375ZM105.658 137.715C106.708 140.451 107.86 142.994 109.114 145.345C113.944 154.401 119.771 159.782 125.625 161.576V135.213C118.537 135.475 111.826 136.341 105.658 137.715ZM106.62 157.63C104.663 155.051 102.913 152.322 101.388 149.466C99.7793 146.415 98.3734 143.261 97.1787 140.025C93.5795 141.182 90.0749 142.616 86.6963 144.312C92.3932 150.019 99.1697 154.545 106.62 157.63ZM94.5187 131.695C92.25 123.095 90.9672 114.265 90.695 105.375H68.9075C69.7177 117.014 73.8543 128.175 80.825 137.531C84.9375 135.274 89.5312 133.314 94.5187 131.695ZM153.389 157.63C160.835 154.547 167.6 150.024 173.295 144.321C169.919 142.625 166.418 141.192 162.821 140.034C161.626 143.267 160.22 146.418 158.613 149.466C157.09 152.321 155.343 155.051 153.389 157.63ZM134.375 135.204V161.576C140.238 159.791 146.056 154.401 150.886 145.345C152.146 142.994 153.298 140.451 154.342 137.715C147.777 136.274 141.093 135.427 134.375 135.204ZM165.481 131.695C170.469 133.314 175.062 135.274 179.175 137.531C186.146 128.175 190.282 117.014 191.092 105.375H169.305C169.033 114.265 167.75 123.095 165.481 131.695ZM191.092 96.625C190.282 84.986 186.146 73.8246 179.175 64.4688C175.062 66.7262 170.469 68.6863 165.481 70.305C167.651 78.355 168.981 87.2625 169.305 96.625H191.092ZM158.613 52.5338C160.164 55.4621 161.57 58.6062 162.83 61.9662C166.423 60.808 169.922 59.3746 173.295 57.6788C167.599 51.9792 160.834 47.4595 153.389 44.3788C155.296 46.855 157.046 49.6025 158.613 52.5338ZM154.342 64.285C153.344 61.675 152.19 59.1271 150.886 56.655C146.056 47.5987 140.238 42.2175 134.375 40.4237V66.7875C141.463 66.525 148.174 65.6587 154.342 64.285Z"
                          fill="black"
                        />
                      </g>
                      <path
                        d="M172.178 215.008V182H179.541V221H172.914L172.178 215.008ZM154.811 207.594V207.061C154.811 204.962 155.048 203.057 155.521 201.348C155.995 199.621 156.689 198.14 157.604 196.904C158.518 195.669 159.643 194.712 160.98 194.035C162.318 193.358 163.841 193.02 165.551 193.02C167.159 193.02 168.564 193.358 169.766 194.035C170.984 194.712 172.017 195.677 172.863 196.93C173.727 198.165 174.421 199.63 174.945 201.322C175.47 202.998 175.851 204.835 176.088 206.832V208C175.851 209.913 175.47 211.69 174.945 213.332C174.421 214.974 173.727 216.413 172.863 217.648C172.017 218.867 170.984 219.815 169.766 220.492C168.547 221.169 167.125 221.508 165.5 221.508C163.79 221.508 162.267 221.161 160.93 220.467C159.609 219.773 158.492 218.799 157.578 217.547C156.681 216.294 155.995 214.822 155.521 213.129C155.048 211.436 154.811 209.591 154.811 207.594ZM162.123 207.061V207.594C162.123 208.728 162.208 209.786 162.377 210.768C162.563 211.749 162.859 212.621 163.266 213.383C163.689 214.128 164.23 214.712 164.891 215.135C165.568 215.541 166.389 215.744 167.354 215.744C168.606 215.744 169.639 215.465 170.451 214.906C171.264 214.331 171.882 213.544 172.305 212.545C172.745 211.546 172.999 210.395 173.066 209.092V205.766C173.016 204.699 172.863 203.743 172.609 202.896C172.372 202.033 172.017 201.297 171.543 200.688C171.086 200.078 170.51 199.604 169.816 199.266C169.139 198.927 168.335 198.758 167.404 198.758C166.456 198.758 165.644 198.978 164.967 199.418C164.29 199.841 163.74 200.425 163.316 201.17C162.91 201.915 162.605 202.795 162.402 203.811C162.216 204.809 162.123 205.893 162.123 207.061Z"
                        fill="black"
                      />
                      <path
                        d="M133.965 199.393V221H126.652V193.527H133.508L133.965 199.393ZM132.898 206.299H130.918C130.918 204.268 131.18 202.439 131.705 200.814C132.23 199.173 132.966 197.776 133.914 196.625C134.862 195.457 135.988 194.568 137.291 193.959C138.611 193.333 140.084 193.02 141.709 193.02C142.995 193.02 144.172 193.206 145.238 193.578C146.305 193.951 147.219 194.543 147.98 195.355C148.759 196.168 149.352 197.243 149.758 198.58C150.181 199.917 150.393 201.551 150.393 203.48V221H143.029V203.455C143.029 202.236 142.86 201.288 142.521 200.611C142.183 199.934 141.684 199.46 141.023 199.189C140.38 198.902 139.585 198.758 138.637 198.758C137.655 198.758 136.8 198.952 136.072 199.342C135.361 199.731 134.769 200.273 134.295 200.967C133.838 201.644 133.491 202.439 133.254 203.354C133.017 204.268 132.898 205.249 132.898 206.299Z"
                        fill="black"
                      />
                      <path
                        d="M113.805 214.805V202.566C113.805 201.686 113.661 200.933 113.373 200.307C113.085 199.663 112.637 199.164 112.027 198.809C111.435 198.453 110.665 198.275 109.717 198.275C108.904 198.275 108.202 198.419 107.609 198.707C107.017 198.978 106.56 199.376 106.238 199.9C105.917 200.408 105.756 201.009 105.756 201.703H98.4434C98.4434 200.535 98.7142 199.426 99.2559 198.377C99.7975 197.327 100.585 196.405 101.617 195.609C102.65 194.797 103.877 194.162 105.299 193.705C106.738 193.248 108.346 193.02 110.123 193.02C112.256 193.02 114.152 193.375 115.811 194.086C117.469 194.797 118.773 195.863 119.721 197.285C120.686 198.707 121.168 200.484 121.168 202.617V214.373C121.168 215.88 121.261 217.115 121.447 218.08C121.633 219.028 121.904 219.857 122.26 220.568V221H114.871C114.516 220.255 114.245 219.324 114.059 218.207C113.889 217.073 113.805 215.939 113.805 214.805ZM114.77 204.268L114.82 208.406H110.732C109.768 208.406 108.93 208.516 108.219 208.736C107.508 208.956 106.924 209.27 106.467 209.676C106.01 210.065 105.671 210.522 105.451 211.047C105.248 211.572 105.146 212.147 105.146 212.773C105.146 213.4 105.29 213.967 105.578 214.475C105.866 214.965 106.281 215.355 106.822 215.643C107.364 215.913 107.999 216.049 108.727 216.049C109.827 216.049 110.783 215.829 111.596 215.389C112.408 214.949 113.035 214.407 113.475 213.764C113.932 213.12 114.169 212.511 114.186 211.936L116.115 215.033C115.844 215.727 115.472 216.447 114.998 217.191C114.541 217.936 113.957 218.639 113.246 219.299C112.535 219.942 111.68 220.475 110.682 220.898C109.683 221.305 108.498 221.508 107.127 221.508C105.383 221.508 103.801 221.161 102.379 220.467C100.974 219.756 99.8568 218.783 99.0273 217.547C98.2148 216.294 97.8086 214.872 97.8086 213.281C97.8086 211.842 98.0794 210.564 98.6211 209.447C99.1628 208.33 99.9583 207.391 101.008 206.629C102.074 205.85 103.403 205.266 104.994 204.877C106.585 204.471 108.43 204.268 110.529 204.268H114.77Z"
                        fill="black"
                      />
                      <path
                        d="M95.0664 215.059V221H76.4551V215.059H95.0664ZM78.918 184.031V221H71.3008V184.031H78.918Z"
                        fill="black"
                      />
                      <defs>
                        <clipPath id="clip0_1_699">
                          <rect
                            width="140"
                            height="140"
                            fill="white"
                            transform="translate(60 31)"
                          />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div class="dice-face">
                    <!-- Fluss-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="#D0ECF7"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <path
                        d="M177.857 213.408C177.857 212.883 177.705 212.41 177.4 211.986C177.096 211.563 176.529 211.174 175.699 210.818C174.887 210.446 173.71 210.107 172.17 209.803C170.782 209.498 169.487 209.117 168.285 208.66C167.1 208.186 166.068 207.619 165.188 206.959C164.324 206.299 163.647 205.52 163.156 204.623C162.665 203.709 162.42 202.668 162.42 201.5C162.42 200.349 162.665 199.266 163.156 198.25C163.664 197.234 164.383 196.337 165.314 195.559C166.262 194.763 167.413 194.145 168.768 193.705C170.139 193.248 171.679 193.02 173.389 193.02C175.775 193.02 177.824 193.4 179.533 194.162C181.26 194.924 182.58 195.973 183.494 197.311C184.425 198.631 184.891 200.137 184.891 201.83H177.578C177.578 201.119 177.426 200.484 177.121 199.926C176.833 199.35 176.376 198.902 175.75 198.58C175.141 198.242 174.345 198.072 173.363 198.072C172.551 198.072 171.848 198.216 171.256 198.504C170.663 198.775 170.206 199.147 169.885 199.621C169.58 200.078 169.428 200.586 169.428 201.145C169.428 201.568 169.512 201.949 169.682 202.287C169.868 202.609 170.164 202.905 170.57 203.176C170.977 203.447 171.501 203.701 172.145 203.938C172.805 204.158 173.617 204.361 174.582 204.547C176.562 204.953 178.331 205.486 179.889 206.146C181.446 206.79 182.682 207.67 183.596 208.787C184.51 209.887 184.967 211.335 184.967 213.129C184.967 214.348 184.696 215.465 184.154 216.48C183.613 217.496 182.834 218.385 181.818 219.146C180.803 219.891 179.584 220.475 178.162 220.898C176.757 221.305 175.174 221.508 173.414 221.508C170.858 221.508 168.691 221.051 166.914 220.137C165.154 219.223 163.816 218.063 162.902 216.658C162.005 215.236 161.557 213.781 161.557 212.291H168.488C168.522 213.29 168.776 214.094 169.25 214.703C169.741 215.312 170.359 215.753 171.104 216.023C171.865 216.294 172.686 216.43 173.566 216.43C174.514 216.43 175.301 216.303 175.928 216.049C176.554 215.778 177.028 215.423 177.35 214.982C177.688 214.525 177.857 214.001 177.857 213.408Z"
                        fill="black"
                      />
                      <path
                        d="M151.146 213.408C151.146 212.883 150.994 212.41 150.689 211.986C150.385 211.563 149.818 211.174 148.988 210.818C148.176 210.446 146.999 210.107 145.459 209.803C144.071 209.498 142.776 209.117 141.574 208.66C140.389 208.186 139.357 207.619 138.477 206.959C137.613 206.299 136.936 205.52 136.445 204.623C135.954 203.709 135.709 202.668 135.709 201.5C135.709 200.349 135.954 199.266 136.445 198.25C136.953 197.234 137.673 196.337 138.604 195.559C139.551 194.763 140.702 194.145 142.057 193.705C143.428 193.248 144.968 193.02 146.678 193.02C149.064 193.02 151.113 193.4 152.822 194.162C154.549 194.924 155.869 195.973 156.783 197.311C157.714 198.631 158.18 200.137 158.18 201.83H150.867C150.867 201.119 150.715 200.484 150.41 199.926C150.122 199.35 149.665 198.902 149.039 198.58C148.43 198.242 147.634 198.072 146.652 198.072C145.84 198.072 145.137 198.216 144.545 198.504C143.952 198.775 143.495 199.147 143.174 199.621C142.869 200.078 142.717 200.586 142.717 201.145C142.717 201.568 142.801 201.949 142.971 202.287C143.157 202.609 143.453 202.905 143.859 203.176C144.266 203.447 144.79 203.701 145.434 203.938C146.094 204.158 146.906 204.361 147.871 204.547C149.852 204.953 151.62 205.486 153.178 206.146C154.735 206.79 155.971 207.67 156.885 208.787C157.799 209.887 158.256 211.335 158.256 213.129C158.256 214.348 157.985 215.465 157.443 216.48C156.902 217.496 156.123 218.385 155.107 219.146C154.092 219.891 152.873 220.475 151.451 220.898C150.046 221.305 148.464 221.508 146.703 221.508C144.147 221.508 141.98 221.051 140.203 220.137C138.443 219.223 137.105 218.063 136.191 216.658C135.294 215.236 134.846 213.781 134.846 212.291H141.777C141.811 213.29 142.065 214.094 142.539 214.703C143.03 215.312 143.648 215.753 144.393 216.023C145.154 216.294 145.975 216.43 146.855 216.43C147.803 216.43 148.59 216.303 149.217 216.049C149.843 215.778 150.317 215.423 150.639 214.982C150.977 214.525 151.146 214.001 151.146 213.408Z"
                        fill="black"
                      />
                      <path
                        d="M123.395 214.424V193.527H130.707V221H123.826L123.395 214.424ZM124.207 208.787L126.365 208.736C126.365 210.564 126.154 212.266 125.73 213.84C125.307 215.397 124.673 216.751 123.826 217.902C122.98 219.036 121.913 219.925 120.627 220.568C119.34 221.195 117.826 221.508 116.082 221.508C114.745 221.508 113.509 221.322 112.375 220.949C111.258 220.56 110.293 219.959 109.48 219.146C108.685 218.317 108.059 217.259 107.602 215.973C107.161 214.669 106.941 213.104 106.941 211.275V193.527H114.254V211.326C114.254 212.139 114.347 212.824 114.533 213.383C114.736 213.941 115.016 214.398 115.371 214.754C115.727 215.109 116.141 215.363 116.615 215.516C117.106 215.668 117.648 215.744 118.24 215.744C119.747 215.744 120.932 215.439 121.795 214.83C122.675 214.221 123.293 213.391 123.648 212.342C124.021 211.275 124.207 210.09 124.207 208.787Z"
                        fill="black"
                      />
                      <path
                        d="M101.102 182V221H93.7637V182H101.102Z"
                        fill="black"
                      />
                      <path
                        d="M72.918 184.031V221H65.3008V184.031H72.918ZM87.6445 199.824V205.766H70.8359V199.824H87.6445ZM89.4219 184.031V189.998H70.8359V184.031H89.4219Z"
                        fill="black"
                      />
                      <path
                        d="M209.126 104.018C216.506 103.402 221.787 106.053 225.179 108.96C226.839 110.383 228.024 111.843 228.803 112.961C229.194 113.523 229.489 114.009 229.696 114.373C229.8 114.556 229.882 114.709 229.943 114.827C229.974 114.887 230 114.937 230.021 114.979C230.031 114.999 230.039 115.018 230.047 115.034C230.051 115.042 230.054 115.05 230.058 115.057C230.059 115.06 230.061 115.064 230.062 115.067C230.063 115.068 230.064 115.071 230.064 115.072C230.065 115.074 230.067 115.076 226 117.002L230.067 115.076C231.131 117.322 230.172 120.005 227.926 121.069C225.75 122.099 223.164 121.232 222.037 119.135L221.946 118.955C221.95 118.962 221.952 118.967 221.953 118.97C221.952 118.969 221.951 118.967 221.95 118.964C221.94 118.944 221.913 118.894 221.87 118.819C221.784 118.667 221.634 118.418 221.416 118.105C220.976 117.473 220.286 116.619 219.321 115.792C217.463 114.199 214.494 112.601 209.874 112.987C208.036 113.14 206.048 114.017 203.612 115.763C201.127 117.545 198.698 119.827 195.712 122.477C190.074 127.48 182.747 133.567 172.693 133.998C162.259 134.446 155.06 127.647 149.385 122.55C143.211 117.006 138.363 112.933 131.545 113.002C124.701 113.071 120.021 117.139 114.102 122.612C108.634 127.666 101.697 134.399 91.3262 133.998C81.1735 133.606 74.3782 127.025 69.1143 122.028C63.3442 116.549 59.3881 113.002 54 113.002C48.0917 113.002 44.2334 115.697 41.7314 118.499C40.4596 119.924 39.5601 121.361 38.9824 122.44C38.696 122.974 38.4955 123.408 38.373 123.691C38.312 123.832 38.2703 123.934 38.248 123.99C38.2428 124.004 38.2385 124.015 38.2354 124.023L38.2363 124.02C37.3988 126.358 34.8254 127.575 32.4863 126.74C30.1461 125.904 28.926 123.329 29.7617 120.989L33.8252 122.44C29.8804 121.031 29.7663 120.988 29.7637 120.985C29.7639 120.984 29.7651 120.981 29.7656 120.98C29.7667 120.977 29.7673 120.973 29.7686 120.97L29.8008 120.884C29.8189 120.836 29.8419 120.774 29.8711 120.699C29.9294 120.551 30.0103 120.352 30.1152 120.11C30.3248 119.627 30.6324 118.967 31.0488 118.19C31.8773 116.643 33.1655 114.581 35.0186 112.505C38.7666 108.307 44.9084 104.002 54 104.002C63.6119 104.002 70.1897 110.637 75.3115 115.5C80.9393 120.844 85.3939 124.762 91.6738 125.005C97.7352 125.239 101.979 121.563 107.992 116.003C113.553 110.862 120.657 104.111 131.455 104.002C142.279 103.893 149.631 110.676 155.397 115.855C161.662 121.48 166.142 125.27 172.307 125.006C178.852 124.725 184.026 120.813 189.738 115.744C192.427 113.358 195.386 110.587 198.369 108.448C201.401 106.275 204.964 104.365 209.126 104.018ZM38.2354 124.023L38.2305 124.037L38.2295 124.039L38.2354 124.023Z"
                        fill="black"
                      />
                      <path
                        d="M209.126 64.5899C216.506 63.9737 221.787 66.6251 225.179 69.5322C226.839 70.9553 228.024 72.4149 228.803 73.5332C229.194 74.0953 229.489 74.581 229.696 74.9453C229.8 75.1277 229.882 75.2808 229.943 75.3994C229.974 75.4587 230 75.5092 230.021 75.5508C230.031 75.5715 230.039 75.5904 230.047 75.6065C230.051 75.6144 230.054 75.6221 230.058 75.6289C230.059 75.6322 230.061 75.6357 230.062 75.6387C230.063 75.6401 230.064 75.6426 230.064 75.6436C230.065 75.6458 230.067 75.6482 226 77.5742L230.067 75.6485C231.131 77.8945 230.172 80.577 227.926 81.6406C225.75 82.6711 223.164 81.8043 222.037 79.707L221.946 79.5274C221.95 79.534 221.952 79.5391 221.953 79.542C221.952 79.5405 221.951 79.5385 221.95 79.5361C221.94 79.5161 221.913 79.466 221.87 79.3906C221.784 79.2392 221.634 78.9898 221.416 78.6768C220.976 78.0448 220.286 77.1914 219.321 76.3643C217.463 74.771 214.494 73.1728 209.874 73.5586C208.036 73.7122 206.048 74.5887 203.612 76.335C201.127 78.1167 198.698 80.3995 195.712 83.0488C190.074 88.0517 182.747 94.1388 172.693 94.5703C162.259 95.018 155.06 88.2187 149.385 83.1221C143.211 77.5779 138.363 73.5054 131.545 73.5742C124.701 73.6435 120.021 77.7108 114.102 83.1836C108.634 88.2384 101.697 94.9713 91.3262 94.5703C81.1735 94.1778 74.3782 87.5974 69.1143 82.5996C63.3442 77.1213 59.3881 73.5742 54 73.5742C48.0917 73.5742 44.2334 76.2692 41.7314 79.0713C40.4596 80.4958 39.5601 81.9333 38.9824 83.0117C38.696 83.5464 38.4955 83.9803 38.373 84.2627C38.312 84.4036 38.2703 84.506 38.248 84.5625C38.2428 84.5759 38.2385 84.5866 38.2354 84.5947L38.2363 84.5918C37.3988 86.9295 34.8254 88.1469 32.4863 87.3115C30.1461 86.4756 28.926 83.9009 29.7617 81.5606L33.8252 83.0117C29.8804 81.6028 29.7663 81.5598 29.7637 81.5567C29.7639 81.5559 29.7651 81.5533 29.7656 81.5518C29.7667 81.5488 29.7673 81.5454 29.7686 81.542L29.8008 81.4561C29.8189 81.4077 29.8419 81.3457 29.8711 81.2715C29.9294 81.123 30.0103 80.9236 30.1152 80.6817C30.3248 80.1985 30.6324 79.5392 31.0488 78.7617C31.8773 77.2152 33.1655 75.1526 35.0186 73.0772C38.7666 68.8793 44.9084 64.5742 54 64.5742C63.6119 64.5742 70.1897 71.2094 75.3115 76.0723C80.9393 81.4156 85.3939 85.3343 91.6738 85.5772C97.7352 85.8115 101.979 82.1347 107.992 76.5752C113.553 71.4339 120.657 64.6832 131.455 64.5742C142.279 64.4652 149.631 71.2485 155.397 76.4268C161.662 82.0525 166.142 85.8424 172.307 85.5781C178.852 85.2974 184.026 81.3849 189.738 76.3164C192.427 73.9302 195.386 71.1588 198.369 69.0205C201.401 66.8469 204.964 64.9374 209.126 64.5899ZM38.2354 84.5947L38.2305 84.6094L38.2295 84.6113L38.2354 84.5947Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                  <div class="dice-face">
                    <!-- Name-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="#FBEBEA"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <path
                        d="M187.074 221.508C184.941 221.508 183.029 221.169 181.336 220.492C179.643 219.798 178.204 218.842 177.02 217.623C175.852 216.404 174.954 214.991 174.328 213.383C173.702 211.758 173.389 210.031 173.389 208.203V207.188C173.389 205.105 173.685 203.201 174.277 201.475C174.87 199.748 175.716 198.25 176.816 196.98C177.934 195.711 179.288 194.738 180.879 194.061C182.47 193.367 184.264 193.02 186.262 193.02C188.208 193.02 189.935 193.341 191.441 193.984C192.948 194.628 194.209 195.542 195.225 196.727C196.257 197.911 197.036 199.333 197.561 200.992C198.085 202.634 198.348 204.462 198.348 206.477V209.523H176.512V204.648H191.162V204.09C191.162 203.074 190.976 202.169 190.604 201.373C190.248 200.561 189.706 199.917 188.979 199.443C188.251 198.969 187.32 198.732 186.186 198.732C185.221 198.732 184.391 198.944 183.697 199.367C183.003 199.79 182.436 200.383 181.996 201.145C181.573 201.906 181.251 202.803 181.031 203.836C180.828 204.852 180.727 205.969 180.727 207.188V208.203C180.727 209.303 180.879 210.319 181.184 211.25C181.505 212.181 181.954 212.985 182.529 213.662C183.122 214.339 183.833 214.864 184.662 215.236C185.508 215.609 186.465 215.795 187.531 215.795C188.852 215.795 190.079 215.541 191.213 215.033C192.364 214.508 193.354 213.721 194.184 212.672L197.738 216.531C197.163 217.361 196.376 218.156 195.377 218.918C194.395 219.68 193.21 220.306 191.822 220.797C190.434 221.271 188.852 221.508 187.074 221.508Z"
                        fill="black"
                      />
                      <path
                        d="M136.699 199.215V221H129.361V193.527H136.242L136.699 199.215ZM135.684 206.299H133.652C133.652 204.386 133.881 202.626 134.338 201.018C134.812 199.393 135.497 197.988 136.395 196.803C137.309 195.601 138.434 194.67 139.771 194.01C141.109 193.35 142.658 193.02 144.418 193.02C145.637 193.02 146.754 193.206 147.77 193.578C148.785 193.934 149.657 194.501 150.385 195.279C151.13 196.041 151.705 197.04 152.111 198.275C152.518 199.494 152.721 200.958 152.721 202.668V221H145.408V203.48C145.408 202.228 145.239 201.263 144.9 200.586C144.562 199.909 144.079 199.435 143.453 199.164C142.844 198.893 142.107 198.758 141.244 198.758C140.296 198.758 139.467 198.952 138.756 199.342C138.062 199.731 137.486 200.273 137.029 200.967C136.572 201.644 136.234 202.439 136.014 203.354C135.794 204.268 135.684 205.249 135.684 206.299ZM152.035 205.461L149.42 205.791C149.42 203.997 149.64 202.329 150.08 200.789C150.537 199.249 151.206 197.895 152.086 196.727C152.983 195.559 154.092 194.653 155.412 194.01C156.732 193.35 158.256 193.02 159.982 193.02C161.303 193.02 162.505 193.214 163.588 193.604C164.671 193.976 165.594 194.577 166.355 195.406C167.134 196.219 167.727 197.285 168.133 198.605C168.556 199.926 168.768 201.542 168.768 203.455V221H161.43V203.455C161.43 202.186 161.26 201.221 160.922 200.561C160.6 199.883 160.126 199.418 159.5 199.164C158.891 198.893 158.163 198.758 157.316 198.758C156.436 198.758 155.666 198.936 155.006 199.291C154.346 199.63 153.796 200.104 153.355 200.713C152.915 201.322 152.585 202.033 152.365 202.846C152.145 203.641 152.035 204.513 152.035 205.461Z"
                        fill="black"
                      />
                      <path
                        d="M116.387 214.805V202.566C116.387 201.686 116.243 200.933 115.955 200.307C115.667 199.663 115.219 199.164 114.609 198.809C114.017 198.453 113.247 198.275 112.299 198.275C111.486 198.275 110.784 198.419 110.191 198.707C109.599 198.978 109.142 199.376 108.82 199.9C108.499 200.408 108.338 201.009 108.338 201.703H101.025C101.025 200.535 101.296 199.426 101.838 198.377C102.38 197.327 103.167 196.405 104.199 195.609C105.232 194.797 106.459 194.162 107.881 193.705C109.32 193.248 110.928 193.02 112.705 193.02C114.838 193.02 116.734 193.375 118.393 194.086C120.051 194.797 121.355 195.863 122.303 197.285C123.268 198.707 123.75 200.484 123.75 202.617V214.373C123.75 215.88 123.843 217.115 124.029 218.08C124.215 219.028 124.486 219.857 124.842 220.568V221H117.453C117.098 220.255 116.827 219.324 116.641 218.207C116.471 217.073 116.387 215.939 116.387 214.805ZM117.352 204.268L117.402 208.406H113.314C112.35 208.406 111.512 208.516 110.801 208.736C110.09 208.956 109.506 209.27 109.049 209.676C108.592 210.065 108.253 210.522 108.033 211.047C107.83 211.572 107.729 212.147 107.729 212.773C107.729 213.4 107.872 213.967 108.16 214.475C108.448 214.965 108.863 215.355 109.404 215.643C109.946 215.913 110.581 216.049 111.309 216.049C112.409 216.049 113.365 215.829 114.178 215.389C114.99 214.949 115.617 214.407 116.057 213.764C116.514 213.12 116.751 212.511 116.768 211.936L118.697 215.033C118.426 215.727 118.054 216.447 117.58 217.191C117.123 217.936 116.539 218.639 115.828 219.299C115.117 219.942 114.262 220.475 113.264 220.898C112.265 221.305 111.08 221.508 109.709 221.508C107.965 221.508 106.383 221.161 104.961 220.467C103.556 219.756 102.439 218.783 101.609 217.547C100.797 216.294 100.391 214.872 100.391 213.281C100.391 211.842 100.661 210.564 101.203 209.447C101.745 208.33 102.54 207.391 103.59 206.629C104.656 205.85 105.985 205.266 107.576 204.877C109.167 204.471 111.012 204.268 113.111 204.268H117.352Z"
                        fill="black"
                      />
                      <path
                        d="M95.3887 184.031V221H87.7715L72.918 196.219V221H65.3008V184.031H72.918L87.7969 208.838V184.031H95.3887Z"
                        fill="black"
                      />
                      <path
                        d="M76.0996 136.219C82.7241 118.754 100.792 109.287 110.869 105.999C111.909 105.66 113.02 105.831 113.975 106.363C116.787 107.925 122.194 110.271 133.381 110.271C141.73 110.271 146.573 108.302 148.867 106.997C149.965 106.372 151.238 105.99 152.463 106.298C158.653 107.854 178.094 114.125 188.562 133.394C194.109 143.603 194.827 154.105 194.521 158.065C180.87 168.042 153.324 170 131.912 170C110.5 170 82 166 72.183 159.229C72.183 159.229 70.7142 150.417 76.0996 136.219Z"
                        fill="#181818"
                      />
                      <path
                        d="M168.751 65.3497C168.751 85.4251 152.477 101.699 132.402 101.699C112.326 101.699 96.052 85.4251 96.052 65.3497C96.052 45.2743 112.326 29 132.402 29C152.477 29 168.751 45.2743 168.751 65.3497Z"
                        fill="#181818"
                      />
                    </svg>
                  </div>
                  <div class="dice-face">
                    <!-- Tier-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="#F9F0E9"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <path
                        d="M193.789 74.4701C192.196 70.6833 189.549 67.9531 186.132 66.578L186.086 66.5609C184.532 65.9517 182.876 65.64 181.206 65.6421H181.022C173.202 65.7597 165.218 72.4059 161.159 82.1811C158.182 89.3296 157.84 97.0177 160.246 102.748C161.836 106.538 164.489 109.268 167.92 110.643L167.957 110.657C169.512 111.266 171.167 111.577 172.837 111.576C180.732 111.576 188.799 104.93 192.934 95.0256C195.873 87.8857 196.198 80.2031 193.789 74.4701Z"
                        fill="black"
                      />
                      <path
                        d="M162.544 116.634C158.033 113.923 153.77 111.359 150.985 106.754C143.302 94.007 138.662 86.3125 126.498 86.3125C114.333 86.3125 109.682 94.007 101.982 106.754C99.1911 111.365 94.9189 113.932 90.3941 116.654C85.2062 119.772 79.8457 122.993 77.5316 129.332C76.632 131.618 76.1788 134.054 76.1965 136.51C76.1965 146.831 84.2357 155.229 94.1119 155.229C99.2082 155.229 104.632 153.464 110.371 151.595C115.889 149.797 121.594 147.94 126.526 147.94C131.459 147.94 137.149 149.797 142.647 151.595C148.375 153.452 153.772 155.218 158.883 155.218C168.745 155.218 176.77 146.82 176.77 136.499C176.778 134.041 176.315 131.604 175.406 129.321C173.092 122.976 167.729 119.752 162.544 116.634Z"
                        fill="black"
                      />
                      <path
                        d="M96.0676 76.2188C99.4838 80.505 103.819 82.865 108.274 82.865C108.883 82.865 109.49 82.82 110.092 82.73C119.385 81.3635 125.175 70.0236 123.275 56.8923C122.48 51.3715 120.355 46.2298 117.312 42.4173C113.901 38.1397 109.561 35.7827 105.108 35.7827C104.5 35.7827 103.892 35.8278 103.291 35.9176C93.9977 37.2842 88.2071 48.6241 90.1077 61.7555C90.8999 67.2674 93.0244 72.4035 96.0676 76.2188Z"
                        fill="black"
                      />
                      <path
                        d="M142.912 82.7298C143.513 82.8195 144.121 82.8648 144.729 82.8648C149.187 82.8648 153.519 80.5048 156.936 76.2186C159.976 72.4033 162.089 67.2672 162.893 61.7495C164.793 48.624 159.003 37.284 149.71 35.9118C149.109 35.8219 148.501 35.7769 147.893 35.7769C143.44 35.7826 139.099 38.1396 135.689 42.4172C132.645 46.2297 130.521 51.3713 129.729 56.8976C127.828 70.0234 133.619 81.3633 142.912 82.7298Z"
                        fill="black"
                      />
                      <path
                        d="M85.0377 110.657L85.0778 110.643C88.5029 109.268 91.1526 106.541 92.7402 102.754C95.1461 97.0122 94.8074 89.3324 91.8359 82.1839C87.722 72.2911 79.6576 65.6421 71.7713 65.6421C70.1013 65.6397 68.4457 65.9514 66.8908 66.5609L66.8506 66.5752C63.4343 67.9387 60.7845 70.6775 59.1969 74.4643C56.7911 80.2061 57.1299 87.8857 60.1012 95.0341C64.2152 104.927 72.2794 111.576 80.1657 111.576C81.8329 111.577 83.4854 111.266 85.0377 110.657Z"
                        fill="black"
                      />
                      <path
                        d="M167.246 199.52V221H159.934V193.527H166.814L167.246 199.52ZM175.523 193.35L175.396 200.129C175.041 200.078 174.609 200.036 174.102 200.002C173.611 199.951 173.162 199.926 172.756 199.926C171.723 199.926 170.826 200.061 170.064 200.332C169.32 200.586 168.693 200.967 168.186 201.475C167.695 201.982 167.322 202.6 167.068 203.328C166.831 204.056 166.696 204.885 166.662 205.816L165.189 205.359C165.189 203.582 165.367 201.949 165.723 200.459C166.078 198.952 166.594 197.641 167.271 196.523C167.965 195.406 168.812 194.543 169.811 193.934C170.809 193.324 171.952 193.02 173.238 193.02C173.645 193.02 174.059 193.053 174.482 193.121C174.906 193.172 175.253 193.248 175.523 193.35Z"
                        fill="black"
                      />
                      <path
                        d="M144.496 221.508C142.363 221.508 140.451 221.169 138.758 220.492C137.065 219.798 135.626 218.842 134.441 217.623C133.273 216.404 132.376 214.991 131.75 213.383C131.124 211.758 130.811 210.031 130.811 208.203V207.188C130.811 205.105 131.107 203.201 131.699 201.475C132.292 199.748 133.138 198.25 134.238 196.98C135.355 195.711 136.71 194.738 138.301 194.061C139.892 193.367 141.686 193.02 143.684 193.02C145.63 193.02 147.357 193.341 148.863 193.984C150.37 194.628 151.631 195.542 152.646 196.727C153.679 197.911 154.458 199.333 154.982 200.992C155.507 202.634 155.77 204.462 155.77 206.477V209.523H133.934V204.648H148.584V204.09C148.584 203.074 148.398 202.169 148.025 201.373C147.67 200.561 147.128 199.917 146.4 199.443C145.673 198.969 144.742 198.732 143.607 198.732C142.643 198.732 141.813 198.944 141.119 199.367C140.425 199.79 139.858 200.383 139.418 201.145C138.995 201.906 138.673 202.803 138.453 203.836C138.25 204.852 138.148 205.969 138.148 207.188V208.203C138.148 209.303 138.301 210.319 138.605 211.25C138.927 212.181 139.376 212.985 139.951 213.662C140.544 214.339 141.255 214.864 142.084 215.236C142.93 215.609 143.887 215.795 144.953 215.795C146.273 215.795 147.501 215.541 148.635 215.033C149.786 214.508 150.776 213.721 151.605 212.672L155.16 216.531C154.585 217.361 153.798 218.156 152.799 218.918C151.817 219.68 150.632 220.306 149.244 220.797C147.856 221.271 146.273 221.508 144.496 221.508Z"
                        fill="black"
                      />
                      <path
                        d="M125.809 193.527V221H118.471V193.527H125.809ZM118.014 186.367C118.014 185.301 118.386 184.421 119.131 183.727C119.876 183.033 120.874 182.686 122.127 182.686C123.363 182.686 124.353 183.033 125.098 183.727C125.859 184.421 126.24 185.301 126.24 186.367C126.24 187.434 125.859 188.314 125.098 189.008C124.353 189.702 123.363 190.049 122.127 190.049C120.874 190.049 119.876 189.702 119.131 189.008C118.386 188.314 118.014 187.434 118.014 186.367Z"
                        fill="black"
                      />
                      <path
                        d="M102.83 184.031V221H95.2383V184.031H102.83ZM114.205 184.031V189.998H84.041V184.031H114.205Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                  <div class="dice-face">
                    <!-- Jackpot-Icon -->
                    <svg
                      width="260"
                      height="260"
                      viewBox="0 0 260 260"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0 24C0 10.7452 10.7452 0 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.255 249.255 260 236 260H24C10.7452 260 0 249.255 0 236V24Z"
                        fill="#FEE04B"
                      />
                      <path
                        d="M236 251V260H24V251H236ZM251 236V24C251 15.7157 244.284 9 236 9H24C15.7157 9 9 15.7157 9 24V236C9 244.284 15.7157 251 24 251V260L23.3809 259.992C10.6179 259.669 0.331002 249.382 0.0078125 236.619L0 236V24C0 10.7452 10.7452 2.73809e-07 24 0H236C249.255 0 260 10.7452 260 24V236C260 249.048 249.588 259.664 236.619 259.992L236 260V251C244.284 251 251 244.284 251 236Z"
                        fill="black"
                      />
                      <path
                        d="M222.672 193.527V198.707H206.676V193.527H222.672ZM210.637 186.748H217.949V212.723C217.949 213.518 218.051 214.128 218.254 214.551C218.474 214.974 218.796 215.27 219.219 215.439C219.642 215.592 220.175 215.668 220.818 215.668C221.275 215.668 221.682 215.651 222.037 215.617C222.41 215.566 222.723 215.516 222.977 215.465L223.002 220.848C222.376 221.051 221.699 221.212 220.971 221.33C220.243 221.449 219.439 221.508 218.559 221.508C216.951 221.508 215.546 221.245 214.344 220.721C213.159 220.179 212.245 219.316 211.602 218.131C210.958 216.946 210.637 215.389 210.637 213.459V186.748Z"
                        fill="black"
                      />
                      <path
                        d="M178.695 207.543V207.01C178.695 204.995 178.983 203.142 179.559 201.449C180.134 199.74 180.972 198.258 182.072 197.006C183.173 195.753 184.527 194.78 186.135 194.086C187.743 193.375 189.588 193.02 191.67 193.02C193.752 193.02 195.605 193.375 197.23 194.086C198.855 194.78 200.218 195.753 201.318 197.006C202.436 198.258 203.282 199.74 203.857 201.449C204.433 203.142 204.721 204.995 204.721 207.01V207.543C204.721 209.54 204.433 211.394 203.857 213.104C203.282 214.796 202.436 216.277 201.318 217.547C200.218 218.799 198.864 219.773 197.256 220.467C195.648 221.161 193.803 221.508 191.721 221.508C189.639 221.508 187.785 221.161 186.16 220.467C184.552 219.773 183.189 218.799 182.072 217.547C180.972 216.277 180.134 214.796 179.559 213.104C178.983 211.394 178.695 209.54 178.695 207.543ZM186.008 207.01V207.543C186.008 208.694 186.109 209.769 186.312 210.768C186.516 211.766 186.837 212.646 187.277 213.408C187.734 214.153 188.327 214.737 189.055 215.16C189.783 215.583 190.671 215.795 191.721 215.795C192.736 215.795 193.608 215.583 194.336 215.16C195.064 214.737 195.648 214.153 196.088 213.408C196.528 212.646 196.85 211.766 197.053 210.768C197.273 209.769 197.383 208.694 197.383 207.543V207.01C197.383 205.893 197.273 204.843 197.053 203.861C196.85 202.863 196.52 201.982 196.062 201.221C195.622 200.442 195.038 199.833 194.311 199.393C193.583 198.952 192.702 198.732 191.67 198.732C190.637 198.732 189.757 198.952 189.029 199.393C188.318 199.833 187.734 200.442 187.277 201.221C186.837 201.982 186.516 202.863 186.312 203.861C186.109 204.843 186.008 205.893 186.008 207.01Z"
                        fill="black"
                      />
                      <path
                        d="M157.926 198.809V231.562H150.613V193.527H157.393L157.926 198.809ZM175.318 206.959V207.492C175.318 209.49 175.081 211.343 174.607 213.053C174.15 214.762 173.473 216.252 172.576 217.521C171.679 218.774 170.562 219.756 169.225 220.467C167.904 221.161 166.381 221.508 164.654 221.508C162.979 221.508 161.523 221.169 160.287 220.492C159.051 219.815 158.01 218.867 157.164 217.648C156.335 216.413 155.666 214.982 155.158 213.357C154.65 211.732 154.261 209.989 153.99 208.127V206.73C154.261 204.733 154.65 202.905 155.158 201.246C155.666 199.57 156.335 198.123 157.164 196.904C158.01 195.669 159.043 194.712 160.262 194.035C161.497 193.358 162.945 193.02 164.604 193.02C166.347 193.02 167.879 193.35 169.199 194.01C170.536 194.67 171.654 195.618 172.551 196.854C173.465 198.089 174.15 199.562 174.607 201.271C175.081 202.981 175.318 204.877 175.318 206.959ZM167.98 207.492V206.959C167.98 205.791 167.879 204.716 167.676 203.734C167.49 202.736 167.185 201.864 166.762 201.119C166.355 200.374 165.814 199.799 165.137 199.393C164.477 198.969 163.673 198.758 162.725 198.758C161.726 198.758 160.871 198.919 160.16 199.24C159.466 199.562 158.899 200.027 158.459 200.637C158.019 201.246 157.689 201.974 157.469 202.82C157.249 203.667 157.113 204.623 157.062 205.689V209.219C157.147 210.471 157.384 211.597 157.773 212.596C158.163 213.577 158.764 214.356 159.576 214.932C160.389 215.507 161.455 215.795 162.775 215.795C163.74 215.795 164.553 215.583 165.213 215.16C165.873 214.72 166.406 214.119 166.812 213.357C167.236 212.596 167.532 211.715 167.701 210.717C167.887 209.718 167.98 208.643 167.98 207.492Z"
                        fill="black"
                      />
                      <path
                        d="M130.148 181.975V221H122.836V181.975H130.148ZM147.465 193.527L135.531 207.137L129.133 213.611L126.467 208.33L131.545 201.881L138.68 193.527H147.465ZM139.873 221L131.748 208.305L136.801 203.887L148.303 221H139.873Z"
                        fill="black"
                      />
                      <path
                        d="M107.068 215.795C107.965 215.795 108.761 215.626 109.455 215.287C110.149 214.932 110.691 214.441 111.08 213.814C111.486 213.171 111.698 212.418 111.715 211.555H118.596C118.579 213.484 118.062 215.202 117.047 216.709C116.031 218.199 114.669 219.375 112.959 220.238C111.249 221.085 109.337 221.508 107.221 221.508C105.088 221.508 103.226 221.152 101.635 220.441C100.061 219.73 98.7487 218.749 97.6992 217.496C96.6497 216.227 95.8626 214.754 95.3379 213.078C94.8132 211.385 94.5508 209.574 94.5508 207.645V206.908C94.5508 204.962 94.8132 203.15 95.3379 201.475C95.8626 199.782 96.6497 198.309 97.6992 197.057C98.7487 195.787 100.061 194.797 101.635 194.086C103.209 193.375 105.054 193.02 107.17 193.02C109.421 193.02 111.393 193.451 113.086 194.314C114.796 195.178 116.133 196.413 117.098 198.021C118.079 199.613 118.579 201.5 118.596 203.684H111.715C111.698 202.77 111.503 201.94 111.131 201.195C110.775 200.451 110.251 199.858 109.557 199.418C108.88 198.961 108.042 198.732 107.043 198.732C105.977 198.732 105.105 198.961 104.428 199.418C103.751 199.858 103.226 200.467 102.854 201.246C102.481 202.008 102.219 202.88 102.066 203.861C101.931 204.826 101.863 205.842 101.863 206.908V207.645C101.863 208.711 101.931 209.735 102.066 210.717C102.202 211.699 102.456 212.57 102.828 213.332C103.217 214.094 103.751 214.695 104.428 215.135C105.105 215.575 105.985 215.795 107.068 215.795Z"
                        fill="black"
                      />
                      <path
                        d="M82.7188 214.805V202.566C82.7188 201.686 82.5749 200.933 82.2871 200.307C81.9993 199.663 81.5508 199.164 80.9414 198.809C80.349 198.453 79.5788 198.275 78.6309 198.275C77.8184 198.275 77.1159 198.419 76.5234 198.707C75.931 198.978 75.474 199.376 75.1523 199.9C74.8307 200.408 74.6699 201.009 74.6699 201.703H67.3574C67.3574 200.535 67.6283 199.426 68.1699 198.377C68.7116 197.327 69.4987 196.405 70.5312 195.609C71.5638 194.797 72.791 194.162 74.2129 193.705C75.6517 193.248 77.2598 193.02 79.0371 193.02C81.1699 193.02 83.0658 193.375 84.7246 194.086C86.3835 194.797 87.6868 195.863 88.6348 197.285C89.5996 198.707 90.082 200.484 90.082 202.617V214.373C90.082 215.88 90.1751 217.115 90.3613 218.08C90.5475 219.028 90.8184 219.857 91.1738 220.568V221H83.7852C83.4297 220.255 83.1589 219.324 82.9727 218.207C82.8034 217.073 82.7188 215.939 82.7188 214.805ZM83.6836 204.268L83.7344 208.406H79.6465C78.6816 208.406 77.8438 208.516 77.1328 208.736C76.4219 208.956 75.8379 209.27 75.3809 209.676C74.9238 210.065 74.5853 210.522 74.3652 211.047C74.1621 211.572 74.0605 212.147 74.0605 212.773C74.0605 213.4 74.2044 213.967 74.4922 214.475C74.7799 214.965 75.1947 215.355 75.7363 215.643C76.278 215.913 76.9128 216.049 77.6406 216.049C78.7409 216.049 79.6973 215.829 80.5098 215.389C81.3223 214.949 81.9486 214.407 82.3887 213.764C82.8457 213.12 83.0827 212.511 83.0996 211.936L85.0293 215.033C84.7585 215.727 84.3861 216.447 83.9121 217.191C83.4551 217.936 82.8711 218.639 82.1602 219.299C81.4492 219.942 80.5944 220.475 79.5957 220.898C78.597 221.305 77.4121 221.508 76.041 221.508C74.2975 221.508 72.7148 221.161 71.293 220.467C69.888 219.756 68.7708 218.783 67.9414 217.547C67.1289 216.294 66.7227 214.872 66.7227 213.281C66.7227 211.842 66.9935 210.564 67.5352 209.447C68.0768 208.33 68.8724 207.391 69.9219 206.629C70.9883 205.85 72.3171 205.266 73.9082 204.877C75.4993 204.471 77.3444 204.268 79.4434 204.268H83.6836Z"
                        fill="black"
                      />
                      <path
                        d="M54.2559 209.65V184.031H61.8477V209.65C61.8477 212.122 61.306 214.246 60.2227 216.023C59.1393 217.784 57.6582 219.138 55.7793 220.086C53.9173 221.034 51.8184 221.508 49.4824 221.508C47.0618 221.508 44.9206 221.102 43.0586 220.289C41.1966 219.477 39.7324 218.232 38.666 216.557C37.5996 214.864 37.0664 212.723 37.0664 210.133H44.709C44.709 211.487 44.8952 212.562 45.2676 213.357C45.6569 214.153 46.207 214.72 46.918 215.059C47.6289 215.397 48.4837 215.566 49.4824 215.566C50.4473 215.566 51.2852 215.338 51.9961 214.881C52.707 214.424 53.2572 213.755 53.6465 212.875C54.0527 211.995 54.2559 210.92 54.2559 209.65Z"
                        fill="black"
                      />
                      <path
                        d="M167.577 152.748C166.709 152.752 165.861 152.481 165.156 151.975L131.999 127.937L98.8421 151.975C98.1337 152.489 97.2804 152.764 96.4054 152.761C95.5303 152.758 94.6789 152.476 93.9744 151.957C93.2697 151.438 92.7485 150.709 92.4857 149.874C92.223 149.04 92.2326 148.143 92.5131 147.314L105.445 109.011L71.9295 86.0277C71.2036 85.5302 70.6557 84.8138 70.3659 83.9828C70.0761 83.152 70.0595 82.2503 70.3187 81.4093C70.5779 80.5684 71.0992 79.8325 71.8065 79.3092C72.5138 78.7856 73.3699 78.5018 74.2498 78.4996H115.597L128.075 40.0988C128.344 39.2698 128.869 38.5471 129.573 38.0346C130.278 37.5221 131.127 37.2461 131.999 37.2461C132.871 37.2461 133.72 37.5221 134.425 38.0346C135.13 38.5471 135.654 39.2698 135.923 40.0988L148.401 78.5125H189.748C190.629 78.5119 191.487 78.7938 192.197 79.316C192.906 79.8385 193.43 80.5747 193.69 81.4162C193.951 82.2577 193.936 83.1608 193.646 83.9927C193.357 84.8248 192.808 85.5423 192.081 86.0403L158.553 109.011L171.477 147.304C171.687 147.923 171.746 148.584 171.649 149.231C171.553 149.879 171.304 150.494 170.923 151.026C170.542 151.558 170.039 151.991 169.457 152.291C168.876 152.591 168.231 152.747 167.577 152.748Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                </div>
              </div>

              <button class="roll-btn" :disabled="rolling" @click="rollDice">
                <span v-if="rolling">üé≤ W√ºrfelt...</span>
                <span v-else-if="resultText === 'Bereit zum W√ºrfeln!'"
                  >üé≤ W√úRFELN</span
                >
                <span v-else>üé≤ NEU W√úRFELN</span>
              </button>
            </div>

            <!-- Ergebnis-Bereich -->
            <div
              v-show="!rolling && resultText !== 'Bereit zum W√ºrfeln!'"
              class="result-section"
            >
              <div class="result-display">
                <div
                  class="result-category"
                  :class="{'jackpot-animation': isJackpot}"
                >
                  {{ resultText }}
                </div>
                <div class="result-description">{{ subResult }}</div>
                <div class="current-letter-display">
                  <span class="letter-label">Aktueller Buchstabe:</span>
                  <span class="current-letter">{{ currentLetter }}</span>
                </div>
              </div>

              <!-- Spracheingabe und manuelle Eingabe -->
              <div class="input-section">
                <!-- Spracheingabe -->
                <div class="speech-section">
                  <button
                    class="speech-btn"
                    @click="
                      isListening
                        ? stopSpeechRecognition()
                        : startSpeechRecognition()
                    "
                  >
                    <span v-if="isListening">üé§ H√∂ren‚Ä¶</span>
                    <span v-else>üé§ Spracheingabe</span>
                  </button>
                  <div v-if="recognizedWord" class="speech-result">
                    <strong>Erkannt:</strong> {{ recognizedWord }}<br />
                    <span v-if="recognizedLastLetter">
                      <strong>Letzter Buchstabe:</strong>
                      {{ recognizedLastLetter }}
                    </span>
                  </div>

                  <!-- Validierungsergebnis -->
                  <div
                    v-if="validationResult"
                    class="validation-result"
                    :class="{
                      'validation-success': validationResult.includes('‚úÖ'),
                      'validation-error': validationResult.includes('‚ùå'),
                      'validation-warning': validationResult.includes('‚ö†Ô∏è'),
                    }"
                  >
                    <div v-if="isValidating" class="validating-indicator">
                      üîç Validiere...
                    </div>
                    <div v-else class="validation-message">
                      {{ validationResult }}
                      <!-- "Ist trotzdem richtig" Button f√ºr Fehler -->
                      <div
                        v-if="validationResult.includes('‚ùå')"
                        class="manual-approval"
                      >
                        <button
                          class="approval-btn"
                          @click="approveWordManually"
                          title="Wort genehmigen"
                        >
                          ‚úÖ Wort genehmigen
                        </button>
                        <button
                          class="approval-btn reject"
                          @click="rejectWord"
                          title="Wort ablehnen"
                        >
                          ‚ùå Wort ablehnen
                        </button>
                      </div>
                    </div>
                  </div>

                  <!-- Manuelle Texteingabe -->
                  <div class="manual-input-section-new">
                    <div class="manual-input-header-new">
                      <div class="input-icon-new">‚úçÔ∏è</div>
                      <h4 class="input-title-new">Manuelle Eingabe</h4>
                    </div>

                    <div class="input-group-new">
                      <div class="input-wrapper-new">
                        <input
                          v-model="manualWord"
                          class="manual-input-new"
                          placeholder="Dein Begriff hier eingeben..."
                          @keyup.enter="submitManualWord"
                        />
                        <div class="input-focus-border-new"></div>
                      </div>
                      <button
                        class="submit-btn-new"
                        @click="submitManualWord"
                        :disabled="!manualWord.trim()"
                      >
                        <span class="btn-icon-new">üöÄ</span>
                        <span class="btn-text-new">Eingeben</span>
                      </button>
                    </div>

                    <div v-if="manualWord" class="manual-result-new">
                      <div class="result-icon-new">üìù</div>
                      <div class="result-content-new">
                        <span class="result-label-new">Eingegeben:</span>
                        <span class="result-word-new">{{ manualWord }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Spielsteuerung -->
              <div class="game-controls">
                <!-- Timer-Bereich -->
                <div class="timer-section">
                  <div
                    class="timer-display"
                    v-if="timerActive || timeLeft < timerDuration"
                  >
                    <div class="timer-time">{{ timeLeft }}s</div>
                    <div class="timer-bar">
                      <div
                        class="timer-progress"
                        :style="timerProgressStyle"
                      ></div>
                    </div>
                  </div>

                  <div class="timer-buttons">
                    <button
                      class="timer-btn"
                      :class="{'timer-active': timerActive}"
                      @click="toggleTimer"
                    >
                      <span v-if="timerActive">‚è∏Ô∏è Pause</span>
                      <span v-else>‚ñ∂Ô∏è Start</span>
                    </button>
                    <button class="timer-btn" @click="resetGameTimer">
                      üîÑ Reset
                    </button>
                  </div>
                </div>

                <!-- Spieler-Navigation -->
                <div class="player-navigation">
                  <button class="nav-btn" @click="switchPlayer('prev')">
                    ‚Üê Vorheriger
                  </button>
                  <button class="nav-btn" @click="switchPlayer('next')">
                    N√§chster ‚Üí
                  </button>
                </div>

                <!-- Punkte-Steuerung -->
                <div class="points-controls">
                  <button class="points-btn" @click="addPoints(1)">
                    +1 Punkt
                  </button>
                  <button class="points-btn" @click="addPoints(2)">
                    +2 Punkte
                  </button>
                  <button class="points-btn negative" @click="addPoints(-1)">
                    -1 Punkt
                  </button>
                  <button class="points-btn reset" @click="resetPoints">
                    Reset Punkte
                  </button>
                </div>
              </div>
            </div>

            <!-- Spielregeln -->
            <div class="rules-section">
              <h3 class="section-title">Spielregeln</h3>
              <ul class="rules-list">
                <li>
                  <strong>W√ºrfle</strong> und beachte die angezeigte Kategorie
                </li>
                <li>
                  Bei <span class="jackpot-highlight">JACKPOT</span>: W√§hle frei
                  Kategorie & Anfangsbuchstabe
                </li>
                <li>
                  Bei anderen Kategorien: Beginne mit dem letzten Buchstaben des
                  vorherigen Begriffs
                </li>
                <li>
                  Bei korrekter Antwort: Punkte erhalten (1 Punkt normal, 2 f√ºr
                  Jackpot)
                </li>
                <li>Nach deinem Zug: Klicke auf "N√§chster Spieler"</li>
                <li>
                  <span class="speed-info"
                    >‚ö° Bei Speed-Runden (10 oder 15 Sekunden) gibt es f√ºr jede
                    richtige Antwort automatisch 2 Punkte!</span
                  >
                </li>
              </ul>
            </div>
          </div>

          <!-- Spieler hinzuf√ºgen Dialog -->
          <div v-if="showAddPlayer" class="add-player-modal">
            <div class="add-player-card">
              <label class="modal-label">Spielername:</label>
              <input
                v-model="newPlayerName"
                @keyup.enter="confirmAddPlayer"
                class="modal-input"
                placeholder="Name eingeben"
                autofocus
              />
              <div class="modal-buttons">
                <button class="modal-btn primary" @click="confirmAddPlayer">
                  Hinzuf√ºgen
                </button>
                <button class="modal-btn secondary" @click="cancelAddPlayer">
                  Abbrechen
                </button>
              </div>
            </div>
          </div>

          <!-- Multiplayer Join Modal -->
          <div v-if="showJoinModal" class="add-player-modal">
            <div class="add-player-card">
              <h3 class="modal-title">üéÆ Multiplayer beitreten</h3>

              <div class="qr-scanner-section">
                <h4>QR-Code scannen:</h4>
                <div class="qr-scanner-container">
                  <div id="qr-scanner" class="qr-scanner"></div>
                  <p class="scanner-instruction">
                    Richte die Kamera auf den QR-Code des Hosts
                  </p>
                  <div class="scanner-status" v-if="scannerStatus">
                    {{ scannerStatus }}
                  </div>
                  <button
                    v-if="!scannerActive"
                    class="scanner-start-btn"
                    @click="startQRScanner"
                  >
                    üì∑ Scanner starten
                  </button>
                </div>
              </div>

              <div class="manual-join-section">
                <h4>Oder manuell verbinden:</h4>
                <div class="form-group">
                  <label class="modal-label">Spielername:</label>
                  <input
                    v-model="joinPlayerName"
                    class="modal-input"
                    placeholder="Dein Name"
                    autofocus
                  />
                </div>
                <div class="form-group">
                  <label class="modal-label">Host-ID:</label>
                  <input
                    v-model="hostId"
                    class="modal-input"
                    placeholder="Host-ID eingeben"
                  />
                </div>
              </div>

              <div class="modal-buttons">
                <button class="modal-btn primary" @click="joinMultiplayerGame">
                  Beitreten
                </button>
                <button
                  class="modal-btn secondary"
                  @click="showJoinModal = false"
                >
                  Abbrechen
                </button>
              </div>
            </div>
          </div>

          <!-- Zur√ºck zur Startseite -->
          <button class="back-home-btn" @click="router.push('/')">
            Zur√ºck zur Startseite
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import {ref, computed, watch, onMounted, onUnmounted, nextTick} from 'vue';
import {useRouter} from 'vue-router';
import QRCode from 'qrcode';
import {Html5QrcodeScanner, Html5QrcodeScanType} from 'html5-qrcode';
import {Socket} from 'socket.io-client';
import {createSocket} from '../utils/socket';
const router = useRouter();

// Typ f√ºr Spieler
interface Player {
  name: string;
  score: number;
}

// Spieler-Liste mit LocalStorage-Laden
const players = ref<Player[]>([]);
const currentPlayer = ref(0);
const currentLetter = ref('-');
const timerOptions = [10, 15, 30, 45];
const timerDuration = ref(30);
const timeLeft = ref(timerDuration.value);
const timerActive = ref(false);
let timerInterval: number | null = null;
const rolling = ref(false);
const resultText = ref('Bereit zum W√ºrfeln!');
const subResult = ref('Klicke auf den W√ºrfeln-Button');
const isJackpot = ref(false);
const diceRotation = ref({x: 0, y: 0, z: 0});

// Ensure diceRotation is always a valid object
watch(
  diceRotation,
  (newValue) => {
    if (!newValue || typeof newValue !== 'object') {
      diceRotation.value = {x: 0, y: 0, z: 0};
    }
  },
  {deep: true},
);
const scorePulse = ref(false);
const showAddPlayer = ref(false);
const newPlayerName = ref('');
const editingPlayerIndex = ref<number | null>(null);
const editingPlayerName = ref('');
const showMultiplayerPanel = ref(false);

// Multiplayer Variables
const isMultiplayerHost = ref(false);
const isMultiplayerConnected = ref(false);

// Panel standardm√§√üig √∂ffnen wenn Host startet
watch(isMultiplayerHost, (newValue) => {
  if (newValue) {
    showMultiplayerPanel.value = true;
    console.log('üè† Host gestartet - Panel wird ge√∂ffnet');
  }
});
const multiplayerStatusText = ref('Multiplayer verf√ºgbar');
const multiplayerStatusClass = ref('status-available');
const multiplayerPlayers = ref<
  Array<{id: string; name: string; score: number}>
>([]);
const multiplayerPlayerName = ref('');
const multiplayerGameState = ref<{
  category: string;
  currentLetter: string;
} | null>(null);
const showJoinModal = ref(false);
const joinPlayerName = ref('');
const hostId = ref('');
const hostQRCode = ref('');
const qrCodeRef = ref<HTMLElement | null>(null);
const qrScannerRef = ref<HTMLElement | null>(null);
const scannerActive = ref(false);
const scannerStatus = ref('');
const testQRCode = ref('');
const testQRCodeRef = ref<HTMLElement | null>(null);
let qrScanner: Html5QrcodeScanner | null = null;

// WebSocket connection
let socket: Socket | null = null;
const isConnected = ref(false);
const roomId = ref('');
const playerId = ref('');

// Check if we already have a socket connection from JoinGame
onMounted(() => {
  // Check if we have multiplayer data from JoinGame
  const multiplayerConnected = localStorage.getItem('multiplayer_connected');
  const storedPlayerName = localStorage.getItem('multiplayer_player_name');
  const storedHostId = localStorage.getItem('multiplayer_host_id');

  if (multiplayerConnected === 'true' && storedPlayerName && storedHostId) {
    console.log('üîå Found existing multiplayer connection from JoinGame');
    console.log('üë§ Player name:', storedPlayerName);
    console.log('üè† Host ID:', storedHostId);

    // Set up the existing connection
    isMultiplayerConnected.value = true;
    isMultiplayerHost.value = false;
    multiplayerPlayerName.value = storedPlayerName;
    hostId.value = storedHostId;
    roomId.value = storedHostId;

    // Load player list from localStorage
    const storedPlayers = localStorage.getItem('multiplayer_players');
    if (storedPlayers) {
      try {
        const players = JSON.parse(storedPlayers);
        multiplayerPlayers.value = players;
        console.log('üìä Loaded player list from localStorage:', players);
      } catch (error) {
        console.error('‚ùå Error parsing stored player list:', error);
      }
    }

    // Check if socket is already connected from JoinGame
    const socketConnected = localStorage.getItem(
      'multiplayer_socket_connected',
    );
    if (socketConnected === 'true') {
      console.log('üîå Reusing existing socket connection from JoinGame...');
      socket = createSocket();
    } else {
      console.log('üîå Initializing new socket for existing connection...');
      socket = createSocket();
    }
    // Setup client handlers
    socket.on('connect', () => {
      console.log('üîå Connected to server as client');
      isConnected.value = true;
      playerId.value = socket!.id || '';

      // Always join room to receive dice events (server will handle duplicates)
      console.log('üîå Joining room to receive dice events...');
      socket!.emit('joinRoom', {
        roomId: storedHostId,
        playerName: storedPlayerName,
        isHost: false,
      });
    });

    socket.on('playerJoined', (data) => {
      console.log('üë• Client: Joined room:', data);
      console.log('üìä All players received:', data.allPlayers);
      try {
        nextTick(() => {
          multiplayerPlayers.value = data.allPlayers;
          multiplayerGameState.value = data.gameState;
          console.log(
            '‚úÖ Client: Updated multiplayerPlayers:',
            multiplayerPlayers.value,
          );
        });
      } catch (error) {
        console.error('‚ùå Error updating player list:', error);
      }
    });

    // REMOVED: Duplicate diceRolled handler - using single universal handler

    // REMOVED: Duplicate diceStopped handler - using universal handler instead

    socket.on('playerAdded', (data) => {
      console.log('üë• Client: Player added:', data);
      console.log('üìä All players after add:', data.allPlayers);
      try {
        nextTick(() => {
          multiplayerPlayers.value = data.allPlayers;
          console.log(
            '‚úÖ Client: Updated multiplayerPlayers after add:',
            multiplayerPlayers.value,
          );
        });
      } catch (error) {
        console.error('‚ùå Error updating player list after add:', error);
      }
    });

    socket.on('playerTurnChanged', (data) => {
      console.log('üîÑ Client: Player turn changed:', data);
      console.log('üìä All players after turn change:', data.allPlayers);
      try {
        nextTick(() => {
          currentPlayer.value = data.currentPlayer;
          multiplayerGameState.value = data.gameState;
          multiplayerPlayers.value = data.allPlayers;
          console.log(
            '‚úÖ Client: Updated multiplayerPlayers after turn:',
            multiplayerPlayers.value,
          );
        });
      } catch (error) {
        console.error('‚ùå Error updating player list after turn:', error);
      }
    });

    socket.on('scoreUpdated', (data) => {
      console.log('üìä Client: Score updated:', data);
      console.log('üìä All players after score update:', data.allPlayers);
      try {
        nextTick(() => {
          multiplayerPlayers.value = data.allPlayers;
          console.log(
            '‚úÖ Client: Updated multiplayerPlayers after score:',
            multiplayerPlayers.value,
          );
        });
      } catch (error) {
        console.error('‚ùå Error updating player list after score:', error);
      }
    });

    socket.on('speechRecognized', (data) => {
      console.log('üó£Ô∏è Speech recognized:', data);
      recognizedWord.value = data.word;
      recognizedLastLetter.value = data.lastLetter;
      currentLetter.value = data.lastLetter;
    });

    socket.on('disconnect', () => {
      console.log('üîå Disconnected from server');
      isConnected.value = false;
    });
  }

  multiplayerStatusText.value = 'Verbunden mit Host';
  multiplayerStatusClass.value = 'status-connected';
});

const categories = [
  {
    name: 'STADT',
    description: 'Nenne eine Stadt (z.B. Berlin)',
    rotation: {x: 4, y: 5, z: 3},
    endRotation: {x: 0, y: 0, z: 0},
  },
  {
    name: 'LAND',
    description: 'Nenne ein Land (z.B. Frankreich)',
    rotation: {x: -5, y: -4, z: -3},
    endRotation: {x: 180, y: 0, z: 0},
  },
  {
    name: 'FLUSS',
    description: 'Nenne einen Fluss (z.B. Rhein)',
    rotation: {x: 6, y: -5, z: 4},
    endRotation: {x: 0, y: -90, z: 0},
  },
  {
    name: 'NAME',
    description: 'Nenne einen Vornamen (z.B. Anna)',
    rotation: {x: -4, y: 6, z: -5},
    endRotation: {x: 0, y: 90, z: 0},
  },
  {
    name: 'TIER',
    description: 'Nenne ein Tier (z.B. Elefant)',
    rotation: {x: 5, y: 3, z: -6},
    endRotation: {x: -90, y: 0, z: 0},
  },
  {
    name: 'JACKPOT',
    description: 'W√§hle KATEGORIE & BUCHSTABEN frei!',
    rotation: {x: -3, y: -6, z: 5},
    endRotation: {x: 90, y: 0, z: 0},
  },
];

const timerProgressStyle = computed(() => {
  const percent = (timeLeft.value / timerDuration.value) * 100;
  let bg = '#16a34a';
  if (timeLeft.value <= 10) bg = '#ef4444';
  else if (timeLeft.value <= 20) bg = '#fde047';
  return {
    width: percent + '%',
    background: bg,
  };
});

function playSound(type: 'roll' | 'success' | 'jackpot' | 'timer') {
  // @ts-ignore
  const ctx = new (window.AudioContext || window.webkitAudioContext)();

  switch (type) {
    case 'roll':
      // Sch√∂ner W√ºrfel-Sound mit mehreren harmonischen T√∂nen
      const rollDuration = 0.8;
      const rollGain = ctx.createGain();
      rollGain.connect(ctx.destination);
      rollGain.gain.setValueAtTime(0.15, ctx.currentTime);
      rollGain.gain.exponentialRampToValueAtTime(
        0.001,
        ctx.currentTime + rollDuration,
      );

      // Hauptton (sanfter Triangle-Wave)
      const mainOsc = ctx.createOscillator();
      mainOsc.type = 'triangle';
      mainOsc.frequency.setValueAtTime(220, ctx.currentTime);
      mainOsc.frequency.exponentialRampToValueAtTime(
        110,
        ctx.currentTime + rollDuration,
      );
      mainOsc.connect(rollGain);
      mainOsc.start();
      mainOsc.stop(ctx.currentTime + rollDuration);

      // Harmonie-Ton (h√∂her)
      const harmonyOsc = ctx.createOscillator();
      harmonyOsc.type = 'triangle';
      harmonyOsc.frequency.setValueAtTime(330, ctx.currentTime);
      harmonyOsc.frequency.exponentialRampToValueAtTime(
        165,
        ctx.currentTime + rollDuration,
      );
      harmonyOsc.connect(rollGain);
      harmonyOsc.start();
      harmonyOsc.stop(ctx.currentTime + rollDuration);

      // Bass-Ton (tiefer)
      const bassOsc = ctx.createOscillator();
      bassOsc.type = 'triangle';
      bassOsc.frequency.setValueAtTime(110, ctx.currentTime);
      bassOsc.frequency.exponentialRampToValueAtTime(
        55,
        ctx.currentTime + rollDuration,
      );
      bassOsc.connect(rollGain);
      bassOsc.start();
      bassOsc.stop(ctx.currentTime + rollDuration);
      break;

    case 'success':
      // Angenehmer Erfolgs-Sound mit aufsteigender Melodie
      const successGain = ctx.createGain();
      successGain.connect(ctx.destination);
      successGain.gain.setValueAtTime(0.2, ctx.currentTime);
      successGain.gain.exponentialRampToValueAtTime(
        0.001,
        ctx.currentTime + 0.6,
      );

      // Aufsteigende T√∂ne: C, E, G
      const tones = [523.25, 659.25, 783.99]; // C5, E5, G5
      tones.forEach((freq, index) => {
        const osc = ctx.createOscillator();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(freq, ctx.currentTime + index * 0.1);
        osc.connect(successGain);
        osc.start(ctx.currentTime + index * 0.1);
        osc.stop(ctx.currentTime + index * 0.1 + 0.3);
      });
      break;

    case 'jackpot':
      // Spektakul√§rer Jackpot-Sound mit Glocken-Effekt
      const jackpotGain = ctx.createGain();
      jackpotGain.connect(ctx.destination);
      jackpotGain.gain.setValueAtTime(0.25, ctx.currentTime);
      jackpotGain.gain.exponentialRampToValueAtTime(
        0.001,
        ctx.currentTime + 1.2,
      );

      // Glocken-√§hnliche T√∂ne
      const jackpotTones = [392.0, 523.25, 659.25, 830.61, 1046.5]; // G4, C5, E5, G#5, C6
      jackpotTones.forEach((freq, index) => {
        const osc = ctx.createOscillator();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(freq, ctx.currentTime + index * 0.15);

        // Glocken-Effekt mit schneller Abnahme
        const oscGain = ctx.createGain();
        oscGain.gain.setValueAtTime(0.3, ctx.currentTime + index * 0.15);
        oscGain.gain.exponentialRampToValueAtTime(
          0.001,
          ctx.currentTime + index * 0.15 + 0.4,
        );

        osc.connect(oscGain);
        oscGain.connect(jackpotGain);
        osc.start(ctx.currentTime + index * 0.15);
        osc.stop(ctx.currentTime + index * 0.15 + 0.4);
      });
      break;

    case 'timer':
      // Sanfter Timer-Sound
      const timerOsc = ctx.createOscillator();
      const timerGain = ctx.createGain();
      timerOsc.type = 'sine';
      timerOsc.frequency.setValueAtTime(440, ctx.currentTime);
      timerGain.gain.setValueAtTime(0.15, ctx.currentTime);
      timerGain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.2);
      timerOsc.connect(timerGain);
      timerGain.connect(ctx.destination);
      timerOsc.start();
      timerOsc.stop(ctx.currentTime + 0.2);
      break;
  }
}

function switchPlayer(direction: 'next' | 'prev') {
  if (players.value.length === 0) return;

  // Update local current player
  if (direction === 'next') {
    currentPlayer.value = (currentPlayer.value + 1) % players.value.length;
  } else {
    currentPlayer.value =
      currentPlayer.value === 0
        ? players.value.length - 1
        : currentPlayer.value - 1;
  }

  // Send to server if in multiplayer
  if (socket && roomId.value && isMultiplayerConnected.value) {
    console.log('üì° Sending player switch to server:', direction);
    socket.emit('switchPlayer', {
      roomId: roomId.value,
      direction: direction,
    });
  }

  playSound('success');
}

function addPlayer() {
  showAddPlayer.value = true;
  newPlayerName.value = '';
}
function confirmAddPlayer() {
  const name =
    newPlayerName.value.trim() || `Spieler ${players.value.length + 1}`;

  // Add to local players
  players.value.push({name, score: 0});
  currentPlayer.value = players.value.length - 1;

  // Send to server if in multiplayer
  if (socket && roomId.value && isMultiplayerConnected.value) {
    console.log('üì° Sending new player to server:', name);
    socket.emit('addPlayer', {
      roomId: roomId.value,
      playerName: name,
      playerId: socket.id,
    });
  }

  showAddPlayer.value = false;
  newPlayerName.value = '';
  playSound('success');
}
function cancelAddPlayer() {
  showAddPlayer.value = false;
  newPlayerName.value = '';
}

// Neue Wort-Validierung (ohne REST-API)
function validateWord(word: string, category: string, currentLetter: string) {
  if (!word || !category || !currentLetter) {
    return {valid: false, reason: 'Ung√ºltige Eingabe'};
  }

  const cleanWord = word.trim().toLowerCase();
  const cleanLetter = currentLetter.toLowerCase();

  // Pr√ºfe ob das Wort mit dem aktuellen Buchstaben beginnt
  if (!cleanWord.startsWith(cleanLetter)) {
    return {
      valid: false,
      reason: 'Wort muss mit ' + currentLetter + ' beginnen',
    };
  }

  // Pr√ºfe Mindestl√§nge
  if (cleanWord.length < 3) {
    return {valid: false, reason: 'Wort muss mindestens 3 Buchstaben haben'};
  }

  // Pr√ºfe ob das Wort bereits verwendet wurde
  if (usedWords.value.includes(cleanWord)) {
    return {valid: false, reason: 'Wort wurde bereits verwendet'};
  }

  return {valid: true, reason: 'Wort ist g√ºltig'};
}

// Manuelle Wort-Genehmigung (Verbessert)
function approveWordManually() {
  if (recognizedWord.value) {
    console.log('‚úÖ Manuelle Genehmigung f√ºr:', recognizedWord.value);

    // Wort validieren
    const validation = validateWord(
      recognizedWord.value,
      currentCategory.value,
      currentLetter.value,
    );

    if (validation.valid) {
      // Wort zur verwendeten Liste hinzuf√ºgen
      usedWords.value.push(recognizedWord.value.toLowerCase());

      // Punkte geben
      addPoints(1);

      // Erfolgsmeldung anzeigen
      validationResult.value = `‚úÖ "${recognizedWord.value}" wurde genehmigt! +1 Punkt`;

      // Sound abspielen
      playSound('success');

      // N√§chsten Spieler
      switchPlayer('next');
    } else {
      // Fehlermeldung anzeigen
      validationResult.value = `‚ùå "${recognizedWord.value}": ${validation.reason}`;
      playSound('timer');
    }

    // Nach 3 Sekunden zur√ºcksetzen
    setTimeout(() => {
      validationResult.value = '';
      recognizedWord.value = '';
      recognizedLastLetter.value = '';
    }, 3000);
  }
}

// Wort ablehnen
function rejectWord() {
  if (recognizedWord.value) {
    console.log('‚ùå Wort abgelehnt:', recognizedWord.value);

    // Punkte abziehen
    addPoints(-1);

    // Fehlermeldung anzeigen
    validationResult.value = `‚ùå "${recognizedWord.value}" wurde abgelehnt! -1 Punkt`;

    // Sound abspielen
    playSound('timer');

    // N√§chsten Spieler
    switchPlayer('next');

    // Nach 3 Sekunden zur√ºcksetzen
    setTimeout(() => {
      validationResult.value = '';
      recognizedWord.value = '';
      recognizedLastLetter.value = '';
    }, 3000);
  }
}

// Manuelle Wort-Eingabe
function submitManualWord() {
  if (manualWord.value.trim()) {
    console.log('üìù Manuelle Eingabe:', manualWord.value);

    // Wort zur Validierung setzen
    recognizedWord.value = manualWord.value.trim();
    recognizedLastLetter.value = manualWord.value
      .trim()
      .charAt(manualWord.value.trim().length - 1);

    // Wort validieren
    const validation = validateWord(
      manualWord.value.trim(),
      currentCategory.value,
      currentLetter.value,
    );

    if (validation.valid) {
      // Wort zur verwendeten Liste hinzuf√ºgen
      usedWords.value.push(manualWord.value.trim().toLowerCase());

      // Punkte geben
      addPoints(1);

      // Erfolgsmeldung anzeigen
      validationResult.value = `‚úÖ "${manualWord.value.trim()}" wurde genehmigt! +1 Punkt`;

      // Sound abspielen
      playSound('success');

      // N√§chsten Spieler
      switchPlayer('next');
    } else {
      // Fehlermeldung anzeigen
      validationResult.value = `‚ùå "${manualWord.value.trim()}": ${
        validation.reason
      }`;
      playSound('timer');
    }

    // Eingabefeld leeren
    manualWord.value = '';

    // Nach 3 Sekunden zur√ºcksetzen
    setTimeout(() => {
      validationResult.value = '';
      recognizedWord.value = '';
      recognizedLastLetter.value = '';
    }, 3000);
  }
}

// Multiplayer Panel Toggle
function toggleMultiplayerPanel() {
  showMultiplayerPanel.value = !showMultiplayerPanel.value;
  console.log(
    'üîÑ Multiplayer Panel:',
    showMultiplayerPanel.value ? 'ge√∂ffnet' : 'geschlossen',
  );
}

function addPoints(points: number) {
  if (!players.value.length) return;
  // Speed-Runde: +2 statt +1 f√ºr korrekte Antwort
  let actualPoints = points;
  if (points === 1 && isSpeedRound.value) actualPoints = 2;

  // Add points to local player
  players.value[currentPlayer.value].score += actualPoints;

  // Send points to server if in multiplayer
  if (socket && roomId.value && isMultiplayerConnected.value) {
    console.log('üì° Sending points to server:', actualPoints);
    socket.emit('updateScore', {
      roomId: roomId.value,
      playerId: socket.id,
      points: actualPoints,
    });
  }

  scorePulse.value = true;
  setTimeout(() => (scorePulse.value = false), 500);
  if (actualPoints > 0) playSound('success');
}

function resetPoints() {
  players.value.forEach((p) => (p.score = 0));
  playSound('timer');
}

function toggleTimer() {
  if (timerActive.value) {
    stopTimer();
  } else {
    startTimer();
  }
}

function startTimer() {
  console.log('startTimer');
  stopTimer();
  timeLeft.value = timerDuration.value;
  timerActive.value = true;
  timerInterval = window.setInterval(() => {
    timeLeft.value--;
    if (timeLeft.value <= 0) {
      stopTimer();
      playSound('timer');
      alert(
        `Zeit abgelaufen! Spieler ${
          players.value[currentPlayer.value]?.name ?? ''
        } ist dran.`,
      );
    }
  }, 1000);
}

function stopTimer() {
  if (timerInterval) clearInterval(timerInterval);
  timerActive.value = false;
  timerInterval = null;
}

function resetGameTimer() {
  stopTimer();
  timeLeft.value = timerDuration.value;
}

function rollDice() {
  // Prevent multiple simultaneous rolls
  if (rolling.value) {
    console.log('‚ö†Ô∏è Dice already rolling, ignoring duplicate click');
    return;
  }

  rolling.value = true;
  playSound('roll');

  console.log('üé≤ Rolling dice...');

  // Check if in multiplayer mode
  if (socket && roomId.value) {
    console.log('üé≤ === MULTIPLAYER DICE ROLL ===');
    console.log('üîå Socket connected:', socket.connected);
    console.log('üè† Room ID:', roomId.value);

    // Check if socket is properly connected
    if (!socket.connected || !socket.id) {
      console.log('‚ö†Ô∏è Socket not properly connected, reconnecting...');
      socket.connect();

      // Wait for connection and retry
      setTimeout(() => {
        try {
          if (socket?.connected && socket.id) {
            console.log('‚úÖ Socket reconnected, retrying dice roll...');
            socket.emit('rollDice', {roomId: roomId.value});
          } else {
            console.log('‚ùå Socket still not connected, using fallback...');
            // Fallback to single player mode
            setTimeout(() => {
              finishDiceRoll();
            }, 1500);
          }
        } catch (error) {
          console.error('‚ùå Error in socket retry timeout:', error);
          setTimeout(() => {
            finishDiceRoll();
          }, 1500);
        }
      }, 1000);

      return;
    }

    socket.emit('rollDice', {roomId: roomId.value});

    // Add fallback for debugging
    setTimeout(() => {
      try {
        if (rolling.value) {
          console.log('‚ö†Ô∏è Server did not respond, using fallback...');
          finishDiceRoll();
        }
      } catch (error) {
        console.error('‚ùå Error in server timeout fallback:', error);
        finishDiceRoll();
      }
    }, 3000); // 3 second timeout

    return; // Server will handle the result
  }

  console.log('üéÆ Single player mode - local dice roll');
  // Single player mode - start animation immediately
  try {
    nextTick(() => {
      // Clear previous results
      resultText.value = '';
      subResult.value = '';
      currentLetter.value = '-';

      // Start dice animation
      if (!diceRotation.value) {
        diceRotation.value = {x: 0, y: 0, z: 0};
      }

      const randomRotation = Math.floor(Math.random() * categories.length);
      const randomCategory = categories[randomRotation];
      diceRotation.value = {
        x: (randomCategory.rotation.x || 0) * 360,
        y: (randomCategory.rotation.y || 0) * 360,
        z: (randomCategory.rotation.z || 0) * 360,
      };
    });
  } catch (error) {
    console.error('‚ùå Error starting immediate dice animation:', error);
  }

  // Single player mode - finish after animation
  setTimeout(() => {
    finishDiceRoll();
  }, 1500);
}

// Helper function to finish dice roll
function finishDiceRoll() {
  try {
    nextTick(() => {
      // Zuf√§llige Kategorie ausw√§hlen
      const result = Math.floor(Math.random() * categories.length);
      const category = categories[result];

      // Endposition setzen basierend auf der gew√§hlten Kategorie
      diceRotation.value = category.endRotation;

      // Ergebnis anzeigen
      resultText.value = category.name;
      subResult.value = category.description;
      isJackpot.value = result === 5; // JACKPOT ist immer Index 5

      if (isJackpot.value) {
        resultText.value = 'üé∞ JACKPOT üé∞';
        playSound('jackpot');
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        currentLetter.value = letters[Math.floor(Math.random() * 26)];
      }

      rolling.value = false;

      // Timer ggf. neu starten
      if (timerActive.value) {
        resetGameTimer();
        startTimer();
      }
    });
  } catch (error) {
    console.error('‚ùå Error finishing dice roll:', error);
    rolling.value = false;
  }
}

// LocalStorage: Spieler speichern und laden
const STORAGE_KEY = 'lexikonloop_players_v1';
function savePlayers() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(players.value));
}
function loadPlayers() {
  const data = localStorage.getItem(STORAGE_KEY);
  if (data) {
    try {
      const arr = JSON.parse(data);
      if (
        Array.isArray(arr) &&
        arr.every(
          (p) => typeof p.name === 'string' && typeof p.score === 'number',
        )
      ) {
        players.value = arr;
        return;
      }
    } catch {}
  }
  // Fallback: 1 Spieler
  players.value = [{name: 'Spieler 1', score: 0}];
}

function resetAllPlayers() {
  if (confirm('M√∂chtest du wirklich alle Spieler und Punkte l√∂schen?')) {
    players.value = [{name: 'Spieler 1', score: 0}];
    currentPlayer.value = 0;
    localStorage.removeItem(STORAGE_KEY);
    playSound('timer');
  }
}

function startEditPlayer(i: number) {
  editingPlayerIndex.value = i;
  editingPlayerName.value = players.value[i].name;
}
function confirmEditPlayer() {
  if (editingPlayerIndex.value !== null) {
    const name =
      editingPlayerName.value.trim() ||
      `Spieler ${editingPlayerIndex.value + 1}`;
    players.value[editingPlayerIndex.value].name = name;
    editingPlayerIndex.value = null;
    editingPlayerName.value = '';
    playSound('success');
  }
}
function cancelEditPlayer() {
  editingPlayerIndex.value = null;
  editingPlayerName.value = '';
}
function deletePlayer(i: number) {
  if (players.value.length <= 1) return;
  if (confirm(`Spieler "${players.value[i].name}" wirklich l√∂schen?`)) {
    players.value.splice(i, 1);
    if (currentPlayer.value >= players.value.length) currentPlayer.value = 0;
    playSound('timer');
  }
}
function movePlayer(i: number, dir: 'up' | 'down') {
  const newIndex = dir === 'up' ? i - 1 : i + 1;
  if (newIndex < 0 || newIndex >= players.value.length) return;
  const temp = players.value[i];
  players.value[i] = players.value[newIndex];
  players.value[newIndex] = temp;
  if (currentPlayer.value === i) currentPlayer.value = newIndex;
  else if (currentPlayer.value === newIndex) currentPlayer.value = i;
  playSound('success');
}

function setTimerDuration(val: number) {
  timerDuration.value = val;
  timeLeft.value = val;
}

const isSpeedRound = computed(() => timerDuration.value <= 15);

// Computed join link
const joinLink = computed(() => {
  if (!roomId.value) return '';
  return `${window.location.origin}/join?host=${roomId.value}`;
});

// Share via WhatsApp
function shareViaWhatsApp() {
  const text = `üéÆ Lexikon-Loop Multiplayer!\n\nSpiel beitreten:\n${joinLink.value}\n\nHost-ID: ${roomId.value}\n\nViel Spa√ü beim Spielen! üé≤`;
  const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
  window.open(whatsappUrl, '_blank');
}

// Share via Email
function shareViaEmail() {
  const subject = 'üéÆ Lexikon-Loop Multiplayer Einladung';
  const body = `Hallo!\n\nDu wurdest zu einem Lexikon-Loop Multiplayer-Spiel eingeladen!\n\nSpiel beitreten:\n${joinLink.value}\n\nHost-ID: ${roomId.value}\n\nViel Spa√ü beim Spielen! üé≤`;
  const mailtoUrl = `mailto:?subject=${encodeURIComponent(
    subject,
  )}&body=${encodeURIComponent(body)}`;
  window.open(mailtoUrl);
}

// Copy join link to clipboard
async function copyJoinLink() {
  try {
    await navigator.clipboard.writeText(joinLink.value);
    alert('‚úÖ Link wurde in die Zwischenablage kopiert!');
  } catch (error) {
    console.error('Failed to copy link:', error);
    // Fallback: select and copy
    const textArea = document.createElement('textarea');
    textArea.value = joinLink.value;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    alert('‚úÖ Link wurde in die Zwischenablage kopiert!');
  }
}

// Spracherkennung (SpeechRecognition API)
const isListening = ref(false);
const recognizedWord = ref('');
const recognizedLastLetter = ref('');
const validationResult = ref('');
const isValidating = ref(false);
const usedWords = ref<string[]>([]);
const currentCategory = ref('');
const manualWord = ref('');
let recognition: any = null;

// Speech Recognition Variables

function startSpeechRecognition() {
  if (
    !('webkitSpeechRecognition' in window) &&
    !('SpeechRecognition' in window)
  ) {
    alert('Dein Browser unterst√ºtzt keine Spracheingabe.');
    return;
  }
  const SpeechRecognition =
    (window as any).SpeechRecognition ||
    (window as any).webkitSpeechRecognition;
  recognition = new SpeechRecognition();
  recognition.lang = 'de-DE';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  isListening.value = true;
  recognizedWord.value = '';
  recognizedLastLetter.value = '';
  validationResult.value = '';
  recognition.onresult = async (event: any) => {
    const word = event.results[0][0].transcript.trim();
    recognizedWord.value = word;
    // Letzten Buchstaben extrahieren (ohne Sonderzeichen)
    const match = word.match(/[a-zA-Z√§√∂√º√Ñ√ñ√ú√ü](?=[^a-zA-Z√§√∂√º√Ñ√ñ√ú√ü]*$)/);
    recognizedLastLetter.value = match ? match[0].toUpperCase() : '';
    // Setze currentLetter automatisch auf den letzten Buchstaben
    if (recognizedLastLetter.value)
      currentLetter.value = recognizedLastLetter.value;
    isListening.value = false;

    // Wort zur manuellen Validierung bereitstellen
    console.log('üé§ Wort erkannt:', word);

    // Send speech result to server if in multiplayer
    if (socket && roomId.value && isMultiplayerConnected.value) {
      console.log(
        'üì° Sending speech result to server:',
        word,
        recognizedLastLetter.value,
      );
      socket.emit('speechResult', {
        roomId: roomId.value,
        word: word,
        lastLetter: recognizedLastLetter.value,
      });
    }
  };
  recognition.onerror = () => {
    isListening.value = false;
  };
  recognition.onend = () => {
    isListening.value = false;
  };
  recognition.start();
}
function stopSpeechRecognition() {
  if (recognition) recognition.stop();
  isListening.value = false;
}

// REST-API Validierung entfernt - jetzt nur noch manuelle Validierung

// Alte REST-API Validierungsfunktionen entfernt

// Alle alten REST-API Validierungsfunktionen entfernt

// Multiplayer Functions with WebSocket
async function startMultiplayerHost() {
  try {
    console.log('üöÄ Starting Multiplayer Host...');

    // Use nextTick to ensure Vue reactivity before changing variables
    await nextTick();

    multiplayerStatusText.value = 'Starte Multiplayer Host...';
    multiplayerStatusClass.value = 'status-connecting';

    // Generate unique room ID
    const generatedRoomId = `room_${Date.now()}_${Math.random()
      .toString(36)
      .substr(2, 9)}`;
    console.log('üìã Generated Room ID:', generatedRoomId);

    // Create connection URL
    const connectionUrl = `${window.location.origin}/join?host=${generatedRoomId}`;
    console.log('üîó Connection URL:', connectionUrl);

    // Initialize WebSocket connection
    console.log('üîå Creating socket connection...');
    socket = createSocket();

    socket.on('connect', () => {
      console.log('‚úÖ Connected to server');
      console.log('üÜî Socket ID:', socket!.id);
      isConnected.value = true;
      playerId.value = socket!.id || '';

      // Wait a bit for socket to be fully ready
      setTimeout(() => {
        // Join room as host
        console.log('üè† Joining room as host:', generatedRoomId);
        socket!.emit('joinRoom', {
          roomId: generatedRoomId,
          playerName: 'Host',
          isHost: true,
        });
      }, 100);
    });

    socket.on('playerJoined', (data) => {
      console.log('üë• Player joined:', data);
      console.log('üìä All players:', data.allPlayers);
      console.log('üéÆ Game state:', data.gameState);
      try {
        nextTick(() => {
          multiplayerPlayers.value = data.allPlayers;
          multiplayerGameState.value = data.gameState;
        });
      } catch (error) {
        console.error('‚ùå Error in playerJoined event handler:', error);
      }
    });

    // Single universal dice event handler for both host and client
    socket.on('diceRolled', (gameState) => {
      console.log('üé≤ === SINGLE UNIVERSAL DICE ROLLED EVENT (HOST) ===');
      console.log('üìä Game state:', gameState);
      console.log('üè† Is Host:', isMultiplayerHost.value);

      // Prevent duplicate animations
      if (rolling.value) {
        console.log('‚ö†Ô∏è Dice already rolling, ignoring duplicate event');
        return;
      }

      try {
        nextTick(() => {
          // Clear previous results
          resultText.value = '';
          subResult.value = '';
          currentLetter.value = '-';

          // Set rolling state
          rolling.value = gameState.rolling;
          isJackpot.value = gameState.isJackpot;

          // Start dice animation from server event
          if (gameState.rolling) {
            console.log('üé¨ Starting dice animation from server event...');
            try {
              // Ensure diceRotation.value exists
              if (!diceRotation.value) {
                diceRotation.value = {x: 0, y: 0, z: 0};
              }

              // Start random animation
              const randomRotation = Math.floor(
                Math.random() * categories.length,
              );
              const randomCategory = categories[randomRotation];
              diceRotation.value = {
                x: (randomCategory.rotation.x || 0) * 360,
                y: (randomCategory.rotation.y || 0) * 360,
                z: (randomCategory.rotation.z || 0) * 360,
              };
            } catch (error) {
              console.error('‚ùå Error starting dice animation:', error);
            }
          }
        });
      } catch (error) {
        console.error('‚ùå Error in universal diceRolled handler:', error);
      }
    });

    // Universal dice stopped handler for both host and client
    socket.on('diceStopped', (gameState) => {
      console.log('üõë === UNIVERSAL DICE STOPPED EVENT (HOST) ===');
      console.log('üìä Final game state:', gameState);

      try {
        nextTick(() => {
          rolling.value = false;

          // Set final results
          resultText.value = gameState.resultText;
          subResult.value = gameState.subResult;
          currentLetter.value = gameState.currentLetter;
          isJackpot.value = gameState.isJackpot;

          // Set final dice position
          if (gameState.category) {
            try {
              const categoryIndex = categories.findIndex(
                (cat) => cat.name === gameState.category,
              );
              if (categoryIndex !== -1) {
                const category = categories[categoryIndex];
                // Ensure diceRotation.value exists
                if (!diceRotation.value) {
                  diceRotation.value = {x: 0, y: 0, z: 0};
                }

                diceRotation.value = {
                  x: category.endRotation.x || 0,
                  y: category.endRotation.y || 0,
                  z: category.endRotation.z || 0,
                };
                console.log(
                  'üéØ Set dice to final position for:',
                  gameState.category,
                );
              } else {
                console.log('‚ö†Ô∏è Category not found:', gameState.category);
              }
            } catch (error) {
              console.error('‚ùå Error setting dice position:', error);
            }
          }
        });
      } catch (error) {
        console.error('‚ùå Error in universal diceStopped handler:', error);
      }
    });

    socket.on('scoreUpdated', (data) => {
      console.log('Score updated:', data);
      multiplayerPlayers.value = data.allPlayers;
    });

    socket.on('playerTurnChanged', (data) => {
      console.log('Player turn changed:', data);
      currentPlayer.value = data.currentPlayer;
      multiplayerGameState.value = data.gameState;
    });

    socket.on('speechRecognized', (data) => {
      console.log('Speech recognized:', data);
      recognizedWord.value = data.word;
      recognizedLastLetter.value = data.lastLetter;
      currentLetter.value = data.lastLetter;
    });

    socket.on('timerUpdated', (data) => {
      console.log('Timer updated:', data);
      timeLeft.value = data.timeLeft;
      timerActive.value = data.timerActive;
    });

    socket.on('playerAdded', (data) => {
      console.log('üë• Host: Player added:', data);
      multiplayerPlayers.value = data.allPlayers;
      // Sync with local players
      players.value = data.allPlayers.map((p) => ({
        name: p.name,
        score: p.score,
      }));
    });

    socket.on('playerTurnChanged', (data) => {
      console.log('üîÑ Host: Player turn changed:', data);
      currentPlayer.value = data.currentPlayer;
      multiplayerGameState.value = data.gameState;
    });

    socket.on('scoreUpdated', (data) => {
      console.log('üìä Host: Score updated:', data);
      // Update local player score
      if (data.playerId === socket.id) {
        const playerIndex = players.value.findIndex(
          (p) => p.name === data.playerName,
        );
        if (playerIndex !== -1) {
          players.value[playerIndex].score = data.newScore;
        }
      }
      multiplayerPlayers.value = data.allPlayers;
    });

    socket.on('speechRecognized', (data) => {
      console.log('üó£Ô∏è Host: Speech recognized:', data);
      recognizedWord.value = data.word;
      recognizedLastLetter.value = data.lastLetter;
      currentLetter.value = data.lastLetter;
    });

    socket.on('playerLeft', (data) => {
      console.log('Player left:', data);
      multiplayerPlayers.value = data.allPlayers;
    });

    socket.on('disconnect', () => {
      console.log('Disconnected from server');
      isConnected.value = false;
    });

    // Start hosting
    isMultiplayerHost.value = true;
    isMultiplayerConnected.value = true;
    roomId.value = generatedRoomId;
    multiplayerStatusText.value = 'Host aktiv - Warte auf Spieler...';
    multiplayerStatusClass.value = 'status-connected';

    // Wait for DOM update
    await nextTick();

    // Additional delay to ensure DOM is ready
    await new Promise((resolve) => setTimeout(resolve, 100));

    // Generate QR Code after DOM is updated
    await generateQRCode(connectionUrl);

    playSound('success');
  } catch (error) {
    console.error('Multiplayer Host Error:', error);
    multiplayerStatusText.value = 'Multiplayer Host Fehler';
    multiplayerStatusClass.value = 'status-error';
    playSound('timer');
  }
}

function joinMultiplayerGame() {
  try {
    console.log('üë§ Starting multiplayer client...');
    const playerName =
      joinPlayerName.value.trim() ||
      `Spieler ${Math.floor(Math.random() * 1000)}`;
    console.log('üë§ Player name:', playerName);
    console.log('üè† Host ID:', hostId.value);

    // Initialize socket
    socket = createSocket();

    socket.on('connect', () => {
      console.log('üîå Connected to server as client');
      isConnected.value = true;
      playerId.value = socket!.id || '';

      // Don't join room again - JoinGame.vue already did that
      console.log('üîå Client already joined room via JoinGame.vue');
    });

    socket.on('playerJoined', (data) => {
      console.log('üë• Client: Joined room:', data);
      multiplayerPlayers.value = data.allPlayers;
      multiplayerGameState.value = data.gameState;
    });

    // Single universal dice event handler for both host and client
    socket.on('diceRolled', (gameState) => {
      console.log('üé≤ === SINGLE UNIVERSAL DICE ROLLED EVENT (CLIENT) ===');
      console.log('üìä Game state:', gameState);
      console.log('üè† Is Host:', isMultiplayerHost.value);
      console.log('üîå Socket connected:', socket?.connected);
      console.log('üè† Room ID:', roomId.value);

      // Prevent duplicate animations
      if (rolling.value) {
        console.log('‚ö†Ô∏è Dice already rolling, ignoring duplicate event');
        return;
      }

      try {
        nextTick(() => {
          // Clear previous results
          resultText.value = '';
          subResult.value = '';
          currentLetter.value = '-';

          // Set rolling state
          rolling.value = gameState.rolling;
          isJackpot.value = gameState.isJackpot;

          // Start dice animation from server event
          if (gameState.rolling) {
            console.log('üé¨ Starting dice animation from server event...');
            try {
              // Ensure diceRotation.value exists
              if (!diceRotation.value) {
                diceRotation.value = {x: 0, y: 0, z: 0};
              }

              // Start random animation
              const randomRotation = Math.floor(
                Math.random() * categories.length,
              );
              const randomCategory = categories[randomRotation];
              diceRotation.value = {
                x: (randomCategory.rotation.x || 0) * 360,
                y: (randomCategory.rotation.y || 0) * 360,
                z: (randomCategory.rotation.z || 0) * 360,
              };
            } catch (error) {
              console.error('‚ùå Error starting dice animation:', error);
            }
          }
        });
      } catch (error) {
        console.error('‚ùå Error in universal diceRolled handler:', error);
      }
    });

    // Universal dice stopped handler for both host and client
    socket.on('diceStopped', (gameState) => {
      console.log('üõë === UNIVERSAL DICE STOPPED EVENT (CLIENT) ===');
      console.log('üìä Final game state:', gameState);
      console.log('üîå Socket connected:', socket?.connected);
      console.log('üè† Room ID:', roomId.value);

      try {
        nextTick(() => {
          rolling.value = false;

          // Set final results
          resultText.value = gameState.resultText;
          subResult.value = gameState.subResult;
          currentLetter.value = gameState.currentLetter;
          isJackpot.value = gameState.isJackpot;

          // Set final dice position
          if (gameState.category) {
            try {
              const categoryIndex = categories.findIndex(
                (cat) => cat.name === gameState.category,
              );
              if (categoryIndex !== -1) {
                const category = categories[categoryIndex];
                // Ensure diceRotation.value exists
                if (!diceRotation.value) {
                  diceRotation.value = {x: 0, y: 0, z: 0};
                }

                diceRotation.value = {
                  x: category.endRotation.x || 0,
                  y: category.endRotation.y || 0,
                  z: category.endRotation.z || 0,
                };
                console.log(
                  'üéØ Set dice to final position for:',
                  gameState.category,
                );
              } else {
                console.log('‚ö†Ô∏è Category not found:', gameState.category);
              }
            } catch (error) {
              console.error('‚ùå Error setting dice position:', error);
            }
          }
        });
      } catch (error) {
        console.error('‚ùå Error in universal diceStopped handler:', error);
      }
    });

    socket.on('disconnect', () => {
      console.log('üîå Disconnected from server');
      isConnected.value = false;
    });

    // Set client state
    isMultiplayerHost.value = false;
    isMultiplayerConnected.value = true;
    multiplayerPlayerName.value = playerName;
    roomId.value = hostId.value;
    multiplayerStatusText.value = 'Verbunden mit Host';
    multiplayerStatusClass.value = 'status-connected';

    showJoinModal.value = false;
    playSound('success');
  } catch (error) {
    console.error('‚ùå Client start error:', error);
    multiplayerStatusText.value = 'Verbindungsfehler';
    multiplayerStatusClass.value = 'status-error';
    playSound('timer');
  }
}

function disconnectMultiplayer() {
  // Disconnect WebSocket
  if (socket) {
    socket.disconnect();
    socket = null;
  }

  isMultiplayerHost.value = false;
  isMultiplayerConnected.value = false;
  isConnected.value = false;
  multiplayerPlayers.value = [];
  multiplayerPlayerName.value = '';
  multiplayerGameState.value = null;
  hostQRCode.value = '';
  roomId.value = '';
  playerId.value = '';
  showJoinModal.value = false;

  multiplayerStatusText.value = 'Multiplayer verf√ºgbar';
  multiplayerStatusClass.value = 'status-available';

  playSound('timer');
}

// Generate QR Code for connection with robust error handling
async function generateQRCode(data: string) {
  console.log('üîç generateQRCode called with:', data);

  // Safety check: ensure data is valid
  if (!data || typeof data !== 'string') {
    console.error('‚ùå Invalid data for QR code generation:', data);
    return;
  }

  try {
    // Wait for DOM to be ready
    await nextTick();

    // Check if QRCode library is available
    if (typeof QRCode === 'undefined') {
      console.error('‚ùå QRCode library not available');
      showTextFallback(data);
      return;
    }

    // Check if DOM element exists
    if (!qrCodeRef.value) {
      console.error('‚ùå qrCodeRef.value is null');
      return;
    }

    console.log('‚úÖ Starting QR code generation...');

    // Clear previous content safely
    try {
      qrCodeRef.value.innerHTML = '';
    } catch (clearError) {
      console.error('‚ùå Error clearing QR code container:', clearError);
    }

    // Method 1: Try toDataURL first (most reliable)
    try {
      console.log('üîÑ Attempting QRCode.toDataURL...');
      const qrDataUrl = await QRCode.toDataURL(data, {
        width: 200,
        margin: 2,
        color: {
          dark: '#2563eb',
          light: '#ffffff',
        },
      });

      // Verify the data URL is valid
      if (!qrDataUrl || !qrDataUrl.startsWith('data:image/')) {
        throw new Error('Invalid QR code data URL generated');
      }

      // Set the QR code safely
      //  await setQRCodeSafely(qrDataUrl, data);
      const canvas = await QRCode.toCanvas(data, {
        width: 200,
        margin: 2,
        color: {
          dark: '#2563eb',
          light: '#ffffff',
        },
      });

      await setCanvasSafely(canvas as HTMLCanvasElement, data);
    } catch (toDataURLError) {
      console.warn(
        '‚ö†Ô∏è QRCode.toDataURL failed, trying canvas method:',
        toDataURLError,
      );

      // Method 2: Try canvas approach
      try {
        console.log('üîÑ Attempting QRCode.toCanvas...');
        const canvas = await QRCode.toCanvas(data, {
          width: 200,
          margin: 2,
          color: {
            dark: '#2563eb',
            light: '#ffffff',
          },
        });

        // Set canvas safely
        await setCanvasSafely(canvas, data);
      } catch (canvasError) {
        console.warn('‚ö†Ô∏è QRCode.toCanvas also failed:', canvasError);

        // Method 3: Text fallback
        showTextFallback(data);
      }
    }
  } catch (error) {
    console.error('‚ùå QR Code generation completely failed:', error);
    showTextFallback(data);
  }
}

// Helper function to set QR code image safely
async function setQRCodeSafely(qrDataUrl: string, data: string) {
  console.log(
    'üîç setQRCodeSafely called with:',
    qrDataUrl.substring(0, 50) + '...',
    data,
  );

  try {
    // Wait for Vue to be ready
    await nextTick();

    // Double-check DOM element exists
    if (!qrCodeRef.value) {
      console.error('‚ùå qrCodeRef.value is null in setQRCodeSafely');
      return;
    }

    // Verify element is still in DOM
    if (!qrCodeRef.value.parentNode) {
      console.error(
        '‚ùå qrCodeRef.value has no parent - element removed from DOM',
      );
      return;
    }

    console.log('‚úÖ DOM element verified, creating image...');

    // Use innerHTML instead of appendChild to avoid DOM manipulation issues
    const imgHtml = `<img src="${qrDataUrl}" alt="QR Code" style="width: 200px; height: 200px; display: block; margin: 0 auto;">`;

    // Set innerHTML safely with error handling
    try {
      qrCodeRef.value.innerHTML = imgHtml;
      console.log('‚úÖ Image HTML set successfully');
    } catch (innerHTMLError) {
      console.error('‚ùå Error setting innerHTML:', innerHTMLError);
      throw innerHTMLError;
    }

    // Store reference safely
    try {
      hostQRCode.value = data;
      console.log('‚úÖ Reference stored successfully');
    } catch (refError) {
      console.error('‚ùå Error storing reference:', refError);
      // Don't throw here, the image is already set
    }

    console.log('‚úÖ QR Code generated successfully with image method');
  } catch (error) {
    console.error('‚ùå Error in setQRCodeSafely:', error);
    // Try text fallback as last resort
    try {
      showTextFallback(data);
    } catch (fallbackError) {
      console.error('‚ùå Even text fallback failed:', fallbackError);
    }
  }
}

// Helper function to set canvas safely
async function setCanvasSafely(canvas: HTMLCanvasElement, data: string) {
  try {
    await nextTick();
    if (!qrCodeRef.value) {
      console.error('‚ùå qrCodeRef.value is null in setCanvasSafely');
      return;
    }
    // Clear and append canvas safely
    qrCodeRef.value.innerHTML = '';
    qrCodeRef.value.appendChild(canvas);
    // Store reference
    // hostQRCode.value = data;
    console.log('‚úÖ QR Code generated successfully with canvas method');
  } catch (error) {
    console.error('‚ùå Error in setCanvasSafely:', error);
    showTextFallback(data);
  }
}

// Helper function to show text fallback
function showTextFallback(data: string) {
  try {
    if (!qrCodeRef.value) {
      console.error('‚ùå qrCodeRef.value is null in showTextFallback');
      return;
    }

    qrCodeRef.value.innerHTML = `
      <div style="padding: 20px; text-align: center; color: #64748b; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <div style="margin-bottom: 10px;">
          <strong>üì± QR-Code nicht verf√ºgbar</strong>
        </div>
        <div style="font-size: 0.9rem; margin-bottom: 10px;">
          <strong>Verbindungs-URL:</strong>
        </div>
        <code style="word-break: break-all; font-size: 0.8rem; background: #f1f5f9; padding: 8px; border-radius: 4px; display: block;">
          ${data}
        </code>
        <div style="margin-top: 10px; font-size: 0.8rem; color: #64748b;">
          üìã Kopiere diese URL und sende sie an andere Spieler
        </div>
      </div>
    `;

    // Store reference
    hostQRCode.value = data;
    console.log('‚úÖ Text fallback displayed successfully');
  } catch (error) {
    console.error('‚ùå Error in showTextFallback:', error);
  }
}

// QR Scanner Functions
function startQRScanner() {
  if (!qrScanner) {
    scannerActive.value = true;
    scannerStatus.value = 'Scanner wird gestartet...';

    qrScanner = new Html5QrcodeScanner(
      'qr-scanner',
      {
        fps: 10,
        qrbox: {width: 200, height: 200},
        aspectRatio: 1.0,
        supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA],
        showTorchButtonIfSupported: true,
        showZoomSliderIfSupported: true,
      },
      false,
    );

    qrScanner.render(
      (decodedText: string) => {
        // Handle scanned QR code
        console.log('QR Code scanned:', decodedText);
        scannerStatus.value = 'QR-Code erkannt!';

        try {
          // Extract host ID from URL
          const url = new URL(decodedText);
          const extractedHostId = url.searchParams.get('host');

          if (extractedHostId) {
            hostId.value = extractedHostId;
            scannerStatus.value = 'Verbinde mit Host...';
            // Auto-join the game
            joinMultiplayerGame();
          } else {
            scannerStatus.value = 'QR-Code enth√§lt keine Host-ID';
            console.log('No host ID found in QR code');
          }
        } catch (error) {
          scannerStatus.value = 'Ung√ºltiger QR-Code Format';
          console.log('Invalid QR code format:', error);
        }

        // Stop scanner after successful scan
        setTimeout(() => {
          stopQRScanner();
        }, 2000);
      },
      (error: any) => {
        // Only log actual errors, not "no QR code detected" messages
        if (
          error &&
          !error.toString().includes('No barcode or QR code detected')
        ) {
          console.log('QR Scanner error:', error);
          scannerStatus.value = 'Scanner Fehler: ' + error.toString();
        }
      },
    );

    scannerStatus.value = 'Scanner bereit - QR-Code scannen';
  }
}

function stopQRScanner() {
  if (qrScanner) {
    qrScanner.clear();
    qrScanner = null;
  }
  scannerActive.value = false;
  scannerStatus.value = '';
}

// Watch for modal opening to start scanner
watch(showJoinModal, (newValue) => {
  if (newValue) {
    // Start QR scanner when modal opens
    nextTick(() => {
      setTimeout(() => {
        startQRScanner();
      }, 100);
    });
  } else {
    // Stop QR scanner when modal closes
    stopQRScanner();
  }
});

// Sync game state with multiplayer players
function syncGameStateWithMultiplayer() {
  if (isMultiplayerHost.value && multiplayerPlayers.value.length > 0) {
    // Send current game state to all connected players
    const gameState = {
      category: resultText.value,
      currentLetter: currentLetter.value,
      currentPlayer: currentPlayer.value,
      players: players.value,
    };

    // In a real implementation, this would send via WebRTC or WebSocket
    console.log('Syncing game state:', gameState);
  }
}

watch(players, savePlayers, {deep: true});
onMounted(() => {
  loadPlayers();
  window.addEventListener('keydown', handleKeydown);

  // Check for multiplayer connection from /join page
  const storedMultiplayerConnected =
    localStorage.getItem('multiplayer_connected') === 'true';
  const storedPlayerName = localStorage.getItem('multiplayer_player_name');
  const storedHostId = localStorage.getItem('multiplayer_host_id');

  if (storedMultiplayerConnected && storedPlayerName && storedHostId) {
    // Set multiplayer state
    isMultiplayerConnected.value = true;
    multiplayerPlayerName.value = storedPlayerName;
    hostId.value = storedHostId;
    multiplayerStatusText.value = 'Verbunden mit Host';
    multiplayerStatusClass.value = 'status-connected';

    // Clear localStorage after reading
    localStorage.removeItem('multiplayer_connected');
    localStorage.removeItem('multiplayer_player_name');
    localStorage.removeItem('multiplayer_host_id');

    console.log('Multiplayer connection restored:', storedPlayerName);
  }

  // Ensure all template variables are properly initialized
  if (!resultText.value) resultText.value = 'Bereit zum W√ºrfeln!';
  if (!subResult.value) subResult.value = 'Klicke auf den W√ºrfeln-Button';
  if (!currentLetter.value) currentLetter.value = '-';
  if (!rolling.value) rolling.value = false;
  if (!isJackpot.value) isJackpot.value = false;
  if (!timerActive.value) timerActive.value = false;
  if (!timeLeft.value) timeLeft.value = timerDuration.value;
  if (!isMultiplayerHost.value) isMultiplayerHost.value = false;
  if (!isMultiplayerConnected.value) isMultiplayerConnected.value = false;
  if (!showJoinModal.value) showJoinModal.value = false;
  if (!showAddPlayer.value) showAddPlayer.value = false;
});
onUnmounted(() => {
  window.removeEventListener('keydown', handleKeydown);
});

function handleKeydown(e: KeyboardEvent) {
  if (showAddPlayer.value) return;
  if (e.code === 'Space' || e.code === 'Enter') {
    rollDice();
  }
  if (e.code === 'ArrowRight') {
    switchPlayer('next');
  }
  if (e.code === 'ArrowLeft') {
    switchPlayer('prev');
  }
}

// Current Player Display (Prominent)
function getCurrentPlayerName() {
  return players.value[currentPlayer.value]?.name || '';
}

function getCurrentPlayerScore() {
  return players.value[currentPlayer.value]?.score || 0;
}
</script>

<style lang="scss" scoped>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.page-bg {
  min-height: 100vh;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.main-card {
  background: white;
  border-radius: 24px;
  box-shadow: 0 8px 32px rgba(30, 41, 59, 0.1);
  padding: 32px 18px 24px 18px;
  margin: 0 0 0 0;
  max-width: 900px;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

/* Header Section */
.header-section {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1.5rem;
}

.header-content {
  flex: 1;
}

.game-title-animated {
  font-size: 2.1rem;
  font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 800;
  letter-spacing: 0.04em;
  background: linear-gradient(90deg, #2563eb 30%, #fbbf24 70%);
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  -webkit-text-fill-color: transparent;
  text-align: center;
  margin-bottom: 0.1em;
  opacity: 0;
  transform: translateY(-24px) scale(0.98);
  animation: fadeSlideIn 1.2s cubic-bezier(0.23, 1, 0.32, 1) 0.1s forwards;
}

.subtitle-animated {
  color: #64748b;
  font-size: 1.08rem;
  text-align: center;
  margin-bottom: 1.5em;
  opacity: 0;
  transform: translateY(-12px);
  animation: fadeSlideIn 1.2s cubic-bezier(0.23, 1, 0.32, 1) 0.5s forwards;
}

/* Timer Settings Section */
.timer-settings-section {
  margin-bottom: 2rem;
}

.timer-settings {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.timer-settings-label {
  font-weight: 500;
  color: #2563eb;
  font-size: 1.08rem;
}

.timer-buttons {
  display: flex;
  gap: 0.5rem;
}

.timer-settings-btn {
  background: #f1f5f9;
  color: #1e293b;
  border: 2px solid #e0e7ff;
  border-radius: 16px;
  padding: 6px 16px;
  font-size: 1.05rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, border 0.2s;
}

.timer-settings-btn.active,
.timer-settings-btn:hover {
  background: #2563eb;
  color: #fff;
  border-color: #2563eb;
}

.speed-round-badge {
  background: linear-gradient(90deg, #fde047 60%, #fbbf24 100%);
  color: #1e293b;
  font-weight: bold;
  border-radius: 16px;
  padding: 6px 18px;
  margin: 0 auto;
  text-align: center;
  font-size: 1.08rem;
  box-shadow: 0 2px 8px #fde04733;
  display: inline-block;
}

/* Multiplayer Section */
.multiplayer-section {
  margin-bottom: 2rem;
  background: #f8fafc;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 2px 12px rgba(30, 41, 59, 0.1);
}

.multiplayer-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.multiplayer-status {
  padding: 0.5rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
}

.status-available {
  background: #dcfce7;
  color: #166534;
}

.status-connecting {
  background: #fef3c7;
  color: #d97706;
}

.status-connected {
  background: #dbeafe;
  color: #1e40af;
}

.status-error {
  background: #fef2f2;
  color: #dc2626;
}

.status-disconnected {
  background: #f1f5f9;
  color: #64748b;
}

.multiplayer-controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.multiplayer-btn {
  flex: 1;
  padding: 0.75rem 1rem;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.multiplayer-btn.host {
  background: #2563eb;
  color: #fff;
}

.multiplayer-btn.host:hover {
  background: #1d4ed8;
}

.multiplayer-btn.join {
  background: #16a34a;
  color: #fff;
}

.multiplayer-btn.join:hover {
  background: #15803d;
}

.multiplayer-btn.disconnect {
  background: #ef4444;
  color: #fff;
}

.multiplayer-btn.disconnect:hover {
  background: #dc2626;
}

.multiplayer-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.multiplayer-host-info,
.multiplayer-client-info {
  background: #fff;
  border-radius: 12px;
  padding: 1rem;
  border: 2px solid #e0e7ff;
}

.host-info,
.client-info {
  text-align: center;
}

.qr-code-container {
  margin: 1rem 0;
  text-align: center;
}

.qr-code {
  width: 200px;
  height: 200px;
  margin: 0 auto;
  background: #f1f5f9;
  border: 2px solid #e0e7ff;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  color: #64748b;
}

.qr-instruction {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: #64748b;
}

.connected-players {
  margin-top: 1rem;
}

.connected-players h4 {
  margin-bottom: 0.5rem;
  color: #1e293b;
}

.multiplayer-player {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem;
  background: #f8fafc;
  border-radius: 8px;
  margin-bottom: 0.5rem;
}

.game-status {
  margin-top: 1rem;
  padding: 0.75rem;
  background: #f1f5f9;
  border-radius: 8px;
}

.game-status p {
  margin: 0.25rem 0;
  font-size: 0.9rem;
  color: #64748b;
}

/* QR Scanner Styles */
.qr-scanner-section {
  margin: 1rem 0;
}

.qr-scanner-container {
  text-align: center;
}

.qr-scanner {
  width: 200px;
  height: 200px;
  margin: 0 auto;
  background: #f1f5f9;
  border: 2px solid #e0e7ff;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  color: #64748b;
}

.scanner-instruction {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: #64748b;
}

.scanner-status {
  margin-top: 0.5rem;
  padding: 0.5rem;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  text-align: center;
  background: #f1f5f9;
  color: #64748b;
}

.scanner-start-btn {
  margin-top: 1rem;
  padding: 0.75rem 1.5rem;
  background: #2563eb;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.scanner-start-btn:hover {
  background: #1d4ed8;
}

.test-qr-section {
  margin-top: 1.5rem;
  padding: 1rem;
  background: #f8fafc;
  border-radius: 12px;
  border: 2px solid #e0e7ff;
}

.test-qr-btn {
  padding: 0.75rem 1.5rem;
  background: #16a34a;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.test-qr-btn:hover {
  background: #15803d;
}

.test-qr-container {
  margin-top: 1rem;
  text-align: center;
}

.test-qr-code {
  width: 150px;
  height: 150px;
  margin: 0 auto;
  background: #fff;
  border: 2px solid #16a34a;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.test-qr-info {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: #64748b;
}

.manual-join-section {
  margin: 1rem 0;
}

.form-group {
  margin-bottom: 1rem;
}

.modal-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 1rem;
  text-align: center;
}

/* Players Section */
.players-section {
  margin-bottom: 2rem;
}

.players-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.section-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: #1e293b;
  margin: 0;
}

.add-player-btn {
  background: #2563eb;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.2s;
}

.add-player-btn:hover {
  background: #1d4ed8;
}

.players-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.player-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f8fafc;
  border: 2px solid #e0e7ff;
  border-radius: 12px;
  padding: 0.75rem 1rem;
  transition: all 0.2s;
}

.player-active {
  background: linear-gradient(90deg, #2563eb 60%, #60a5fa 100%);
  color: #fff;
  border-color: #2563eb;
  box-shadow: 0 2px 12px #2563eb33;
}

.player-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
}

.player-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #2563eb;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
}

.player-active .player-avatar {
  background: #fff;
  color: #2563eb;
}

.player-name {
  font-weight: 500;
  cursor: pointer;
  flex: 1;
}

.player-score {
  background: #fde047;
  color: #1e293b;
  padding: 0.25rem 0.75rem;
  border-radius: 8px;
  font-weight: bold;
  font-size: 1rem;
}

.player-active .player-score {
  background: #fff;
  color: #2563eb;
}

.player-actions {
  display: flex;
  gap: 0.25rem;
}

.action-btn {
  background: none;
  border: none;
  color: #64748b;
  font-size: 1rem;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: color 0.2s;
}

.action-btn:hover {
  color: #ef4444;
}

.player-active .action-btn {
  color: rgba(255, 255, 255, 0.8);
}

.player-active .action-btn:hover {
  color: #fff;
}

.player-edit-input {
  border: 1px solid #2563eb;
  border-radius: 6px;
  padding: 0.25rem 0.5rem;
  font-size: 1rem;
  width: 120px;
}

.reset-all-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: #fbbf24;
  color: #1e293b;
  border: none;
  border-radius: 12px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  margin: 0 auto;
}

.reset-all-btn:hover {
  background: #f59e1b;
}

.reset-icon {
  width: 20px;
  height: 20px;
}

/* Game Section */
.game-section {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  align-items: center;
}

/* Dice Section */
.dice-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.dice-container {
  width: 200px;
  height: 200px;
  margin: 0 auto;
  position: relative;
}

.dice {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.dice-face {
  position: absolute;
  width: 200px;
  height: 200px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  font-weight: bold;
  color: #1e293b;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  border: 3px solid rgba(0, 0, 0, 0.05);
  text-align: center;
  padding: 20px;
}

/* Positionen der W√ºrfelseiten */
.dice-face:nth-child(1) {
  transform: translateZ(100px);
  color: #2563eb;
}
.dice-face:nth-child(2) {
  transform: rotateX(180deg) translateZ(100px);
  color: #16a34a;
}
.dice-face:nth-child(3) {
  transform: rotateY(90deg) translateZ(100px);
  color: #075985;
}
.dice-face:nth-child(4) {
  transform: rotateY(-90deg) translateZ(100px);
  color: #9333ea;
}
.dice-face:nth-child(5) {
  transform: rotateX(90deg) translateZ(100px);
  color: #d97706;
}
.dice-face:nth-child(6) {
  transform: rotateX(-90deg) translateZ(100px);
  color: #ca8a04;
}

.roll-btn {
  background: #2563eb;
  color: #fff;
  border: none;
  padding: 1rem 2rem;
  font-size: 1.2rem;
  font-weight: bold;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 5px 18px rgba(30, 41, 59, 0.18);
  min-width: 200px;
}

.roll-btn:hover {
  background: #1d4ed8;
  box-shadow: 0 8px 24px rgba(30, 41, 59, 0.25);
}

.roll-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Result Section */
.result-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  width: 100%;
  max-width: 500px;
}

.result-display {
  text-align: center;
  background: #f8fafc;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 2px 12px rgba(30, 41, 59, 0.1);
  width: 100%;
}

.result-category {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: #1e293b;
}

.result-description {
  font-size: 1.1rem;
  color: #64748b;
  margin-bottom: 1rem;
}

.current-letter-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.letter-label {
  font-size: 0.9rem;
  color: #64748b;
  font-weight: 500;
}

.current-letter {
  font-size: 3rem;
  font-weight: bold;
  color: #2563eb;
  background: #f1f5f9;
  border: 3px solid #2563eb;
  border-radius: 12px;
  padding: 0.5rem 1rem;
  min-width: 80px;
  text-align: center;
}

/* Speech Section */
.speech-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  width: 100%;
}

.speech-btn {
  background: linear-gradient(90deg, #2563eb 60%, #60a5fa 100%);
  color: #fff;
  border: none;
  border-radius: 2rem;
  padding: 0.8rem 2rem;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
}

.speech-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(37, 99, 235, 0.3);
}

.speech-result {
  background: #f1f5f9;
  border-radius: 12px;
  padding: 1rem;
  font-size: 1rem;
  color: #1e293b;
  text-align: center;
  width: 100%;
}

/* Validation Result Styles */
.validation-result {
  margin-top: 1rem;
  border-radius: 12px;
  padding: 1rem;
  font-size: 1rem;
  text-align: center;
  width: 100%;
  animation: slideIn 0.3s ease-out;
}

.validation-success {
  background: #dcfce7;
  color: #166534;
  border: 2px solid #22c55e;
}

.validation-error {
  background: #fef2f2;
  color: #dc2626;
  border: 2px solid #ef4444;
}

.validation-warning {
  background: #fef3c7;
  color: #d97706;
  border: 2px solid #f59e0b;
}

.validating-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: 500;
}

.validation-message {
  font-weight: 500;
  line-height: 1.4;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Game Controls */
.game-controls {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  width: 100%;
  max-width: 500px;
}

/* Timer Section */
.timer-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.timer-display {
  text-align: center;
  width: 100%;
}

.timer-time {
  font-size: 2.5rem;
  font-weight: bold;
  color: #fde047;
  margin-bottom: 0.5rem;
}

.timer-bar {
  height: 20px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  overflow: hidden;
}

.timer-progress {
  height: 100%;
  background: linear-gradient(90deg, #16a34a, #fde047, #ef4444);
  width: 100%;
  transition: width 1s linear;
}

.timer-buttons {
  display: flex;
  gap: 1rem;
}

.timer-btn {
  background: #64748b;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.timer-btn:hover {
  background: #475569;
}

.timer-active {
  background: #2563eb;
}

.timer-active:hover {
  background: #1d4ed8;
}

/* Player Navigation */
.player-navigation {
  display: flex;
  gap: 1rem;
  justify-content: center;
}

.nav-btn {
  background: #fbbf24;
  color: #1e293b;
  border: none;
  border-radius: 12px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  flex: 1;
  max-width: 150px;
}

.nav-btn:hover {
  background: #f59e1b;
  transform: translateY(-1px);
}

/* Points Controls */
.points-controls {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.points-btn {
  background: #22c55e;
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.points-btn:hover {
  background: #16a34a;
  transform: translateY(-1px);
}

.points-btn.negative {
  background: #ef4444;
}

.points-btn.negative:hover {
  background: #dc2626;
}

.points-btn.reset {
  background: #64748b;
}

.points-btn.reset:hover {
  background: #475569;
}

/* Rules Section */
.rules-section {
  margin-top: 2rem;
  background: #f8fafc;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 2px 12px rgba(30, 41, 59, 0.1);
}

.rules-list {
  list-style: none;
  padding: 0;
  margin: 1rem 0 0 0;
}

.rules-list li {
  margin-bottom: 0.75rem;
  padding-left: 1.5rem;
  position: relative;
  line-height: 1.5;
}

.rules-list li::before {
  content: '‚Ä¢';
  color: #2563eb;
  font-weight: bold;
  position: absolute;
  left: 0;
}

.jackpot-highlight {
  background: linear-gradient(45deg, #fde047, #fbbf24);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: bold;
}

.speed-info {
  color: #fbbf24;
  font-weight: bold;
  font-size: 1.01rem;
  display: inline-block;
  margin-top: 0.2em;
}

/* Modal Styles */
.add-player-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(30, 41, 59, 0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1200;
}

.add-player-card {
  background: #fff;
  border-radius: 2.2rem;
  box-shadow: 0 8px 32px #2563eb33, 0 2px 24px #fbbf2444;
  padding: 2.5rem 2rem 2rem 2rem;
  min-width: 320px;
  text-align: center;
  position: relative;
  animation: popIn 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}

.modal-label {
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 1rem;
  display: block;
}

.modal-input {
  width: 100%;
  font-size: 1.1rem;
  padding: 0.9rem 1.2rem;
  border-radius: 1.2rem;
  border: 2px solid #e0e7ef;
  margin: 1.2rem 0 1.5rem 0;
  outline: none;
  box-shadow: 0 2px 12px #2563eb11;
  transition: border 0.2s, box-shadow 0.2s;
}

.modal-input:focus {
  border: 2px solid #2563eb;
  box-shadow: 0 0 0 2px #2563eb33;
}

.modal-buttons {
  display: flex;
  gap: 1rem;
}

.modal-btn {
  flex: 1;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-btn.primary {
  background: #2563eb;
  color: #fff;
}

.modal-btn.primary:hover {
  background: #1d4ed8;
}

.modal-btn.secondary {
  background: #64748b;
  color: #fff;
}

.modal-btn.secondary:hover {
  background: #475569;
}

/* Back Home Button */
.back-home-btn {
  display: block;
  margin: 2.5rem auto 0 auto;
  padding: 1.1rem 2.2rem;
  font-size: 1.2rem;
  font-weight: bold;
  color: #2563eb;
  background: #f1f5f9;
  border: 2px solid #2563eb;
  border-radius: 2rem;
  box-shadow: 0 2px 12px #2563eb22;
  cursor: pointer;
  transition: box-shadow 0.3s, transform 0.2s, background 0.2s;
}

.back-home-btn:hover {
  background: #e0e7ef;
  box-shadow: 0 4px 16px #2563eb33;
}

.back-home-btn:active {
  transform: scale(0.97);
}

/* Animations */
@keyframes fadeSlideIn {
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes jackpot-glow {
  0% {
    text-shadow: 0 0 5px #fde047;
  }
  50% {
    text-shadow: 0 0 20px #facc15, 0 0 30px #fbbf24;
  }
  100% {
    text-shadow: 0 0 5px #fde047;
  }
}

.jackpot-animation {
  animation: jackpot-glow 2s infinite;
}

@keyframes popIn {
  0% {
    transform: scale(0.85) translateY(40px);
    opacity: 0;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .main-card {
    padding: 24px 16px 20px 16px;
    margin: 0 8px;
  }

  .header-section {
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }

  .game-title-animated {
    font-size: 1.8rem;
  }

  .subtitle-animated {
    font-size: 1rem;
  }

  .timer-settings {
    flex-direction: column;
    gap: 0.5rem;
  }

  .timer-buttons {
    flex-wrap: wrap;
    justify-content: center;
  }

  .players-list {
    gap: 0.25rem;
  }

  .player-item {
    padding: 0.5rem 0.75rem;
  }

  .player-info {
    gap: 0.5rem;
  }

  .player-avatar {
    width: 28px;
    height: 28px;
    font-size: 1rem;
  }

  .player-name {
    font-size: 0.9rem;
  }

  .player-score {
    font-size: 0.9rem;
    padding: 0.2rem 0.5rem;
  }

  .action-btn {
    font-size: 0.9rem;
    padding: 0.2rem;
  }

  .dice-container {
    width: 160px;
    height: 160px;
  }

  .dice-face {
    width: 160px;
    height: 160px;
    font-size: 1.4rem;
    padding: 16px;
  }

  .roll-btn {
    font-size: 1.1rem;
    padding: 0.8rem 1.5rem;
    min-width: 180px;
  }

  .result-category {
    font-size: 1.6rem;
  }

  .result-description {
    font-size: 1rem;
  }

  .current-letter {
    font-size: 2.5rem;
    padding: 0.4rem 0.8rem;
    min-width: 70px;
  }

  .game-controls {
    gap: 1rem;
  }

  .timer-time {
    font-size: 2rem;
  }

  .timer-buttons {
    flex-direction: column;
    width: 100%;
  }

  .timer-btn {
    width: 100%;
  }

  .player-navigation {
    flex-direction: column;
  }

  .nav-btn {
    max-width: none;
  }

  .points-controls {
    grid-template-columns: 1fr;
  }

  .rules-section {
    padding: 1rem;
  }

  .rules-list li {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
  }

  /* Multiplayer responsive */
  .multiplayer-section {
    padding: 1rem;
  }

  .multiplayer-controls {
    flex-direction: column;
  }

  .multiplayer-btn {
    font-size: 0.9rem;
    padding: 0.6rem 0.8rem;
  }

  .multiplayer-player {
    font-size: 0.9rem;
  }

  .qr-code,
  .qr-scanner {
    width: 150px;
    height: 150px;
  }

  .game-status p {
    font-size: 0.85rem;
  }

  /* Share Game Section */
  .share-game-section {
    margin: 1rem 0;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 12px;
    border: 2px solid #e0e7ff;
  }

  .share-game-section h4 {
    margin-bottom: 0.75rem;
    color: #1e293b;
    font-size: 1rem;
  }

  .share-buttons {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }

  .share-btn {
    flex: 1;
    padding: 0.6rem 1rem;
    border: none;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    min-width: 100px;
  }

  .share-btn.whatsapp {
    background: #25d366;
    color: #fff;
  }

  .share-btn.whatsapp:hover {
    background: #128c7e;
  }

  .share-btn.email {
    background: #ea4335;
    color: #fff;
  }

  .share-btn.email:hover {
    background: #d32f2f;
  }

  .share-btn.copy {
    background: #64748b;
    color: #fff;
  }

  .share-btn.copy:hover {
    background: #475569;
  }

  .join-link-info {
    background: #f1f5f9;
    border-radius: 8px;
    padding: 0.75rem;
    font-size: 0.85rem;
  }

  .join-link-info p {
    margin: 0.25rem 0;
    word-break: break-all;
  }

  .join-link-info code {
    background: #e2e8f0;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.8rem;
  }

  /* Manuelle Genehmigung Button */
  .manual-approval {
    margin-top: 0.75rem;
  }

  .approval-btn {
    background: #10b981;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }

  .approval-btn:hover {
    background: #059669;
    transform: translateY(-1px);
  }

  .approval-btn:active {
    transform: translateY(0);
  }

  .approval-btn.reject {
    background: #ef4444;
  }

  .approval-btn.reject:hover {
    background: #dc2626;
  }

  /* Manuelle Eingabe - NEUE VERSION - Gro√ü, Luftig & Responsiv */
  .manual-input-section-new {
    margin-top: 2rem;
    padding: 2.5rem;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 24px;
    border: 2px solid #e2e8f0;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .manual-input-section-new:hover {
    box-shadow: 0 16px 50px rgba(0, 0, 0, 0.15);
    transform: translateY(-4px);
  }

  .manual-input-header-new {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
    justify-content: center;
  }

  .input-icon-new {
    font-size: 3rem;
    animation: bounce 2s infinite;
  }

  .input-title-new {
    font-size: 2rem;
    font-weight: 800;
    color: #1e293b;
    margin: 0;
    text-align: center;
  }

  .input-group-new {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    flex-direction: column;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .input-wrapper-new {
    flex: 1;
    position: relative;
  }

  .manual-input-new {
    width: 100%;
    padding: 2rem 2.5rem;
    border: 4px solid #e2e8f0;
    border-radius: 20px;
    font-size: 1.5rem;
    font-weight: 600;
    background: #ffffff;
    color: #1e293b;
    transition: all 0.3s ease;
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.1);
    min-height: 80px;
  }

  .manual-input-new:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.2);
    transform: translateY(-3px);
  }

  .manual-input-new::placeholder {
    color: #94a3b8;
    font-weight: 500;
    font-size: 1.4rem;
  }

  .input-focus-border-new {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 20px;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .manual-input-new:focus + .input-focus-border-new {
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.3);
  }

  .submit-btn-new {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 2rem 3rem;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 1.5rem;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 32px rgba(16, 185, 129, 0.5);
    min-height: 80px;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .submit-btn-new:hover:not(:disabled) {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(16, 185, 129, 0.6);
  }

  .submit-btn-new:active:not(:disabled) {
    transform: translateY(-2px);
  }

  .submit-btn-new:disabled {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .btn-icon-new {
    font-size: 2rem;
  }

  .btn-text-new {
    font-weight: 800;
    font-size: 1.5rem;
  }

  .manual-result-new {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-top: 2rem;
    padding: 2rem;
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    border-radius: 20px;
    border: 3px solid #93c5fd;
    animation: slideIn 0.3s ease;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .result-icon-new {
    font-size: 2.5rem;
    animation: pulse 2s infinite;
  }

  .result-content-new {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .result-label-new {
    font-size: 1.2rem;
    font-weight: 800;
    color: #1e40af;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .result-word-new {
    font-size: 1.8rem;
    font-weight: 900;
    color: #1e293b;
  }

  /* Responsive Design f√ºr manuelle Eingabe - NEUE VERSION */

  @media (max-width: 768px) {
    .manual-input-section-new {
      margin-top: 1.5rem;
      padding: 1.5rem;
    }

    .input-icon-new {
      font-size: 2rem;
    }

    .input-title-new {
      font-size: 1.3rem;
    }

    .manual-input-new {
      padding: 1.25rem 1.5rem;
      font-size: 1.1rem;
      min-height: 55px;
    }

    .manual-input-new::placeholder {
      font-size: 1.1rem;
    }

    .submit-btn-new {
      padding: 1.25rem 1.5rem;
      font-size: 1.1rem;
      min-height: 55px;
    }

    .btn-icon-new {
      font-size: 1.3rem;
    }

    .btn-text-new {
      font-size: 1.1rem;
    }

    .result-icon-new {
      font-size: 1.5rem;
    }

    .result-label-new {
      font-size: 0.9rem;
    }

    .result-word-new {
      font-size: 1.2rem;
    }
  }

  @media (max-width: 480px) {
    .manual-input-section-new {
      margin-top: 1rem;
      padding: 1.25rem;
    }

    .input-icon-new {
      font-size: 1.8rem;
    }

    .input-title-new {
      font-size: 1.2rem;
    }

    .manual-input-new {
      padding: 1rem 1.25rem;
      font-size: 1rem;
      min-height: 50px;
    }

    .manual-input-new::placeholder {
      font-size: 1rem;
    }

    .submit-btn-new {
      padding: 1rem 1.25rem;
      font-size: 1rem;
      min-height: 50px;
    }

    .btn-icon-new {
      font-size: 1.2rem;
    }

    .btn-text-new {
      font-size: 1rem;
    }

    .result-icon-new {
      font-size: 1.3rem;
    }

    .result-label-new {
      font-size: 0.85rem;
    }

    .result-word-new {
      font-size: 1.1rem;
    }
  }

  /* Animations */
  @keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-5px);
    }
    60% {
      transform: translateY(-3px);
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Multiplayer Toggle Button */
  .multiplayer-toggle {
    margin-bottom: 1rem;
  }

  .toggle-btn {
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
  }

  .toggle-btn:hover {
    background: #2563eb;
    transform: translateY(-1px);
  }

  .toggle-btn.expanded {
    background: #1d4ed8;
  }

  .toggle-icon {
    font-size: 0.8rem;
    transition: transform 0.2s;
  }

  .toggle-btn.expanded .toggle-icon {
    transform: rotate(180deg);
  }

  /* Multiplayer Panel */
  .multiplayer-panel {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Immer sichtbarer QR-Code */
  .always-visible-qr {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
  }

  .always-visible-qr .qr-code-container {
    text-align: center;
  }

  .always-visible-qr h4 {
    margin: 0 0 0.5rem 0;
    color: #374151;
    font-size: 0.9rem;
  }

  .always-visible-qr .qr-instruction {
    margin: 0.5rem 0 0 0;
    font-size: 0.8rem;
    color: #6b7280;
  }
}

@media (max-width: 480px) {
  .main-card {
    padding: 20px 12px 16px 12px;
    margin: 0 4px;
  }

  .game-title-animated {
    font-size: 1.6rem;
  }

  .dice-container {
    width: 140px;
    height: 140px;
  }

  .dice-face {
    width: 140px;
    height: 140px;
    font-size: 1.2rem;
    padding: 12px;
  }

  .roll-btn {
    font-size: 1rem;
    padding: 0.7rem 1.2rem;
    min-width: 160px;
  }

  .result-category {
    font-size: 1.4rem;
  }

  .current-letter {
    font-size: 2rem;
    padding: 0.3rem 0.6rem;
    min-width: 60px;
  }

  .timer-time {
    font-size: 1.8rem;
  }

  .points-btn {
    font-size: 0.9rem;
    padding: 0.6rem 0.8rem;
  }
}

// @media (min-width: 769px) {
//   .manual-input-section-new {
//     margin-top: 1.5rem;
//     padding: 1.5rem;
//     max-width: 100%;
//   }

//   .input-icon-new {
//     font-size: 2rem;
//   }

//   .input-title-new {
//     font-size: 1.3rem;
//   }

//   .manual-input-new {
//     padding: 1.25rem 1.5rem;
//     font-size: 1.1rem;
//     min-height: 55px;
//     max-width: 100%;
//   }

//   .manual-input-new::placeholder {
//     font-size: 1.1rem;
//   }

//   .submit-btn-new {
//     padding: 1.25rem 1.5rem;
//     font-size: 1.1rem;
//     min-height: 55px;
//     max-width: 100%;
//   }

//   .btn-icon-new {
//     font-size: 1.3rem;
//   }

//   .btn-text-new {
//     font-size: 1.1rem;
//   }

//   .result-icon-new {
//     font-size: 1.5rem;
//   }

//   .result-label-new {
//     font-size: 0.9rem;
//   }

//   .result-word-new {
//     font-size: 1.2rem;
//   }

//   .manual-result-new {
//     max-width: 100%;
//   }
// }
@media (min-width: 769px) {
  .main-card {
    padding: 24px 16px 20px 16px;
    margin: 0 8px;
  }

  .header-section {
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }

  .game-title-animated {
    font-size: 1.8rem;
  }

  .subtitle-animated {
    font-size: 1rem;
  }

  .timer-settings {
    flex-direction: column;
    gap: 0.5rem;
  }

  .timer-buttons {
    flex-wrap: wrap;
    justify-content: center;
  }

  .players-list {
    gap: 0.25rem;
  }

  .player-item {
    padding: 0.5rem 0.75rem;
  }

  .player-info {
    gap: 0.5rem;
  }

  .player-avatar {
    width: 28px;
    height: 28px;
    font-size: 1rem;
  }

  .player-name {
    font-size: 0.9rem;
  }

  .player-score {
    font-size: 0.9rem;
    padding: 0.2rem 0.5rem;
  }

  .action-btn {
    font-size: 0.9rem;
    padding: 0.2rem;
  }

  .dice-container {
    width: 160px;
    height: 160px;
  }

  .dice-face {
    width: 160px;
    height: 160px;
    font-size: 1.4rem;
    padding: 16px;
  }

  .roll-btn {
    font-size: 1.1rem;
    padding: 0.8rem 1.5rem;
    min-width: 180px;
  }

  .result-category {
    font-size: 1.6rem;
  }

  .result-description {
    font-size: 1rem;
  }

  .current-letter {
    font-size: 2.5rem;
    padding: 0.4rem 0.8rem;
    min-width: 70px;
  }

  .game-controls {
    gap: 1rem;
  }

  .timer-time {
    font-size: 2rem;
  }

  .timer-buttons {
    flex-direction: column;
    width: 100%;
  }

  .timer-btn {
    width: 100%;
  }

  .player-navigation {
    flex-direction: column;
  }

  .nav-btn {
    max-width: none;
  }

  .points-controls {
    grid-template-columns: 1fr;
  }

  .rules-section {
    padding: 1rem;
  }

  .rules-list li {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
  }

  /* Multiplayer responsive */
  .multiplayer-section {
    padding: 1rem;
  }

  .multiplayer-controls {
    flex-direction: column;
  }

  .multiplayer-btn {
    font-size: 0.9rem;
    padding: 0.6rem 0.8rem;
  }

  .multiplayer-player {
    font-size: 0.9rem;
  }

  .qr-code,
  .qr-scanner {
    width: 150px;
    height: 150px;
  }

  .game-status p {
    font-size: 0.85rem;
  }

  /* Share Game Section */
  .share-game-section {
    margin: 1rem 0;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 12px;
    border: 2px solid #e0e7ff;
  }

  .share-game-section h4 {
    margin-bottom: 0.75rem;
    color: #1e293b;
    font-size: 1rem;
  }

  .share-buttons {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }

  .share-btn {
    flex: 1;
    padding: 0.6rem 1rem;
    border: none;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    min-width: 100px;
  }

  .share-btn.whatsapp {
    background: #25d366;
    color: #fff;
  }

  .share-btn.whatsapp:hover {
    background: #128c7e;
  }

  .share-btn.email {
    background: #ea4335;
    color: #fff;
  }

  .share-btn.email:hover {
    background: #d32f2f;
  }

  .share-btn.copy {
    background: #64748b;
    color: #fff;
  }

  .share-btn.copy:hover {
    background: #475569;
  }

  .join-link-info {
    background: #f1f5f9;
    border-radius: 8px;
    padding: 0.75rem;
    font-size: 0.85rem;
  }

  .join-link-info p {
    margin: 0.25rem 0;
    word-break: break-all;
  }

  .join-link-info code {
    background: #e2e8f0;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.8rem;
  }

  /* Manuelle Genehmigung Button */
  .manual-approval {
    margin-top: 0.75rem;
  }

  .approval-btn {
    background: #10b981;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }

  .approval-btn:hover {
    background: #059669;
    transform: translateY(-1px);
  }

  .approval-btn:active {
    transform: translateY(0);
  }

  .approval-btn.reject {
    background: #ef4444;
  }

  .approval-btn.reject:hover {
    background: #dc2626;
  }

  /* Manuelle Eingabe - NEUE VERSION - Gro√ü, Luftig & Responsiv */
  .manual-input-section-new {
    margin-top: 2rem;
    padding: 2.5rem;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 24px;
    border: 2px solid #e2e8f0;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .manual-input-section-new:hover {
    box-shadow: 0 16px 50px rgba(0, 0, 0, 0.15);
    transform: translateY(-4px);
  }

  .manual-input-header-new {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 2rem;
    justify-content: center;
  }

  .input-icon-new {
    font-size: 3rem;
    animation: bounce 2s infinite;
  }

  .input-title-new {
    font-size: 2rem;
    font-weight: 800;
    color: #1e293b;
    margin: 0;
    text-align: center;
  }

  .input-group-new {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    flex-direction: column;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .input-wrapper-new {
    flex: 1;
    position: relative;
  }

  .manual-input-new {
    width: 100%;
    padding: 2rem 2.5rem;
    border: 4px solid #e2e8f0;
    border-radius: 20px;
    font-size: 1.5rem;
    font-weight: 600;
    background: #ffffff;
    color: #1e293b;
    transition: all 0.3s ease;
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.1);
    min-height: 80px;
  }

  .manual-input-new:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.2);
    transform: translateY(-3px);
  }

  .manual-input-new::placeholder {
    color: #94a3b8;
    font-weight: 500;
    font-size: 1.4rem;
  }

  .input-focus-border-new {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 20px;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .manual-input-new:focus + .input-focus-border-new {
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.3);
  }

  .submit-btn-new {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 2rem 3rem;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 1.5rem;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 32px rgba(16, 185, 129, 0.5);
    min-height: 80px;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .submit-btn-new:hover:not(:disabled) {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(16, 185, 129, 0.6);
  }

  .submit-btn-new:active:not(:disabled) {
    transform: translateY(-2px);
  }

  .submit-btn-new:disabled {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .btn-icon-new {
    font-size: 2rem;
  }

  .btn-text-new {
    font-weight: 800;
    font-size: 1.5rem;
  }

  .manual-result-new {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-top: 2rem;
    padding: 2rem;
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    border-radius: 20px;
    border: 3px solid #93c5fd;
    animation: slideIn 0.3s ease;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .result-icon-new {
    font-size: 2.5rem;
    animation: pulse 2s infinite;
  }

  .result-content-new {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .result-label-new {
    font-size: 1.2rem;
    font-weight: 800;
    color: #1e40af;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .result-word-new {
    font-size: 1.8rem;
    font-weight: 900;
    color: #1e293b;
  }

  /* Responsive Design f√ºr manuelle Eingabe - NEUE VERSION */

  @media (max-width: 768px) {
    .manual-input-section-new {
      margin-top: 1.5rem;
      padding: 1.5rem;
    }

    .input-icon-new {
      font-size: 2rem;
    }

    .input-title-new {
      font-size: 1.3rem;
    }

    .manual-input-new {
      padding: 1.25rem 1.5rem;
      font-size: 1.1rem;
      min-height: 55px;
    }

    .manual-input-new::placeholder {
      font-size: 1.1rem;
    }

    .submit-btn-new {
      padding: 1.25rem 1.5rem;
      font-size: 1.1rem;
      min-height: 55px;
    }

    .btn-icon-new {
      font-size: 1.3rem;
    }

    .btn-text-new {
      font-size: 1.1rem;
    }

    .result-icon-new {
      font-size: 1.5rem;
    }

    .result-label-new {
      font-size: 0.9rem;
    }

    .result-word-new {
      font-size: 1.2rem;
    }
  }

  @media (max-width: 480px) {
    .manual-input-section-new {
      margin-top: 1rem;
      padding: 1.25rem;
    }

    .input-icon-new {
      font-size: 1.8rem;
    }

    .input-title-new {
      font-size: 1.2rem;
    }

    .manual-input-new {
      padding: 1rem 1.25rem;
      font-size: 1rem;
      min-height: 50px;
    }

    .manual-input-new::placeholder {
      font-size: 1rem;
    }

    .submit-btn-new {
      padding: 1rem 1.25rem;
      font-size: 1rem;
      min-height: 50px;
    }

    .btn-icon-new {
      font-size: 1.2rem;
    }

    .btn-text-new {
      font-size: 1rem;
    }

    .result-icon-new {
      font-size: 1.3rem;
    }

    .result-label-new {
      font-size: 0.85rem;
    }

    .result-word-new {
      font-size: 1.1rem;
    }
  }

  /* Animations */
  @keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-5px);
    }
    60% {
      transform: translateY(-3px);
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Multiplayer Toggle Button */
  .multiplayer-toggle {
    margin-bottom: 1rem;
  }

  .toggle-btn {
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
  }

  .toggle-btn:hover {
    background: #2563eb;
    transform: translateY(-1px);
  }

  .toggle-btn.expanded {
    background: #1d4ed8;
  }

  .toggle-icon {
    font-size: 0.8rem;
    transition: transform 0.2s;
  }

  .toggle-btn.expanded .toggle-icon {
    transform: rotate(180deg);
  }

  /* Multiplayer Panel */
  .multiplayer-panel {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Immer sichtbarer QR-Code */
  .always-visible-qr {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
  }

  .always-visible-qr .qr-code-container {
    text-align: center;
  }

  .always-visible-qr h4 {
    margin: 0 0 0.5rem 0;
    color: #374151;
    font-size: 0.9rem;
  }

  .always-visible-qr .qr-instruction {
    margin: 0.5rem 0 0 0;
    font-size: 0.8rem;
    color: #6b7280;
  }
}

/* Current Player Display (Prominent) */
.current-player-display {
  margin-bottom: 2rem;
}

.current-player-card {
  display: flex;
  align-items: center;
  background: #f8fafc;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 2px 12px rgba(30, 41, 59, 0.1);
}

.current-player-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #2563eb;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  margin-right: 1rem;
}

.current-player-info {
  flex: 1;
}

.current-player-label {
  font-weight: 500;
  color: #1e293b;
  margin-bottom: 0.5rem;
}

.current-player-name {
  font-size: 1.2rem;
  font-weight: bold;
  color: #2563eb;
}

.current-player-score {
  font-size: 1rem;
  color: #64748b;
}

.current-player-indicator {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #22c55e;
  margin-left: 1rem;
}

.pulse-dot {
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
}
</style>
